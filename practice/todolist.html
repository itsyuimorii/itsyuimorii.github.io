<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TodoList App | ☻ itsyuimorii.space</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content=" ">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.204ed3d4.js" as="script"><link rel="preload" href="/assets/js/2.a44fb3b0.js" as="script"><link rel="preload" href="/assets/js/1.8d37d391.js" as="script"><link rel="preload" href="/assets/js/56.710acef5.js" as="script"><link rel="prefetch" href="/assets/js/10.d8df69df.js"><link rel="prefetch" href="/assets/js/11.2a97faa3.js"><link rel="prefetch" href="/assets/js/12.5fd72f78.js"><link rel="prefetch" href="/assets/js/13.767d92f0.js"><link rel="prefetch" href="/assets/js/14.09112e04.js"><link rel="prefetch" href="/assets/js/15.2d87bde7.js"><link rel="prefetch" href="/assets/js/16.d6bec5e2.js"><link rel="prefetch" href="/assets/js/17.3dbcb51f.js"><link rel="prefetch" href="/assets/js/18.4c170722.js"><link rel="prefetch" href="/assets/js/19.1b72b4a4.js"><link rel="prefetch" href="/assets/js/20.9741499c.js"><link rel="prefetch" href="/assets/js/21.7f8f7869.js"><link rel="prefetch" href="/assets/js/22.3f20ce36.js"><link rel="prefetch" href="/assets/js/23.7c0322e8.js"><link rel="prefetch" href="/assets/js/24.fa4b7294.js"><link rel="prefetch" href="/assets/js/25.4b75e33e.js"><link rel="prefetch" href="/assets/js/26.6ccb7807.js"><link rel="prefetch" href="/assets/js/27.6c078df5.js"><link rel="prefetch" href="/assets/js/28.520f43fd.js"><link rel="prefetch" href="/assets/js/29.844af673.js"><link rel="prefetch" href="/assets/js/3.f8c28e7e.js"><link rel="prefetch" href="/assets/js/30.b352e55d.js"><link rel="prefetch" href="/assets/js/31.c2296a43.js"><link rel="prefetch" href="/assets/js/32.f990ea1b.js"><link rel="prefetch" href="/assets/js/33.e2f64269.js"><link rel="prefetch" href="/assets/js/34.b9fe4fba.js"><link rel="prefetch" href="/assets/js/35.6015d88a.js"><link rel="prefetch" href="/assets/js/36.2ee99065.js"><link rel="prefetch" href="/assets/js/37.9bd0a687.js"><link rel="prefetch" href="/assets/js/38.04db86c7.js"><link rel="prefetch" href="/assets/js/39.1fe91b86.js"><link rel="prefetch" href="/assets/js/4.9eb8282d.js"><link rel="prefetch" href="/assets/js/40.43f0acc3.js"><link rel="prefetch" href="/assets/js/41.7bcb3391.js"><link rel="prefetch" href="/assets/js/42.d64e546e.js"><link rel="prefetch" href="/assets/js/43.a2cbbfc3.js"><link rel="prefetch" href="/assets/js/44.0492f992.js"><link rel="prefetch" href="/assets/js/45.af66bbe7.js"><link rel="prefetch" href="/assets/js/46.c1c9a53c.js"><link rel="prefetch" href="/assets/js/47.7a2bd268.js"><link rel="prefetch" href="/assets/js/48.0376d3a5.js"><link rel="prefetch" href="/assets/js/49.60535624.js"><link rel="prefetch" href="/assets/js/5.4ceb5601.js"><link rel="prefetch" href="/assets/js/50.88e721ab.js"><link rel="prefetch" href="/assets/js/51.a1a8ca8d.js"><link rel="prefetch" href="/assets/js/52.19d2519d.js"><link rel="prefetch" href="/assets/js/53.891befed.js"><link rel="prefetch" href="/assets/js/54.b3d8b254.js"><link rel="prefetch" href="/assets/js/55.a4b8b234.js"><link rel="prefetch" href="/assets/js/6.cb88f024.js"><link rel="prefetch" href="/assets/js/7.0f51d652.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.8ee43d73.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">☻ itsyuimorii.space</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="✸ノート" class="dropdown-title"><span class="title">✸ノート</span> <span class="arrow down"></span></button> <button type="button" aria-label="✸ノート" class="mobile-dropdown-title"><span class="title">✸ノート</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          「学習ノート」
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/react/" class="nav-link">
  ▫️ React.js
</a></li><li class="dropdown-subitem"><a href="/guide/typescript/" class="nav-link">
  ▫️ Typescript
</a></li><li class="dropdown-subitem"><a href="/guide/javascript/" class="nav-link">
  ▫️ Javascript
</a></li><li class="dropdown-subitem"><a href="/guide/nextjs/" class="nav-link">
  ▫️ Next.js
</a></li></ul></li><li class="dropdown-item"><h4>
          「メモ帳」
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/memo/" class="nav-link">
  ▫️ memoメモ
</a></li><li class="dropdown-subitem"><a href="/practice/" class="nav-link router-link-active">
  ▫️ プラクティス
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="✸すべてを記録する" class="dropdown-title"><span class="title">✸すべてを記録する</span> <span class="arrow down"></span></button> <button type="button" aria-label="✸すべてを記録する" class="mobile-dropdown-title"><span class="title">✸すべてを記録する</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          ライフ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/life/reading/" class="nav-link">
  読書メモ
</a></li><li class="dropdown-subitem"><a href="/life/moment/" class="nav-link">
  モーメント
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/itsyuimorii" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="✸ノート" class="dropdown-title"><span class="title">✸ノート</span> <span class="arrow down"></span></button> <button type="button" aria-label="✸ノート" class="mobile-dropdown-title"><span class="title">✸ノート</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          「学習ノート」
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/react/" class="nav-link">
  ▫️ React.js
</a></li><li class="dropdown-subitem"><a href="/guide/typescript/" class="nav-link">
  ▫️ Typescript
</a></li><li class="dropdown-subitem"><a href="/guide/javascript/" class="nav-link">
  ▫️ Javascript
</a></li><li class="dropdown-subitem"><a href="/guide/nextjs/" class="nav-link">
  ▫️ Next.js
</a></li></ul></li><li class="dropdown-item"><h4>
          「メモ帳」
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/memo/" class="nav-link">
  ▫️ memoメモ
</a></li><li class="dropdown-subitem"><a href="/practice/" class="nav-link router-link-active">
  ▫️ プラクティス
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="✸すべてを記録する" class="dropdown-title"><span class="title">✸すべてを記録する</span> <span class="arrow down"></span></button> <button type="button" aria-label="✸すべてを記録する" class="mobile-dropdown-title"><span class="title">✸すべてを記録する</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          ライフ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/life/reading/" class="nav-link">
  読書メモ
</a></li><li class="dropdown-subitem"><a href="/life/moment/" class="nav-link">
  モーメント
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/itsyuimorii" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/practice/" aria-current="page" class="sidebar-link">プラクティス</a></li><li><a href="/practice/todolist.html" aria-current="page" class="active sidebar-link">TodoList App</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/practice/todolist.html#プロジェクトの構成" class="sidebar-link">プロジェクトの構成</a></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#tdinput-component" class="sidebar-link">TdInput Component</a></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#tdlist-component" class="sidebar-link">TdList Component</a></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#tditem-component" class="sidebar-link">TdItem Component</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/practice/todolist.html#定義-inputref" class="sidebar-link">定義 inputRef</a></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#定義-itodo-接口" class="sidebar-link">定義 Itodo 接口</a></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#定義-iprops-src-components-todolist-input-index-tsx" class="sidebar-link">定義 Iprops src/components/TodoList/Input/index.tsx</a></li></ul></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#todolist-父組件" class="sidebar-link">TodoList 父組件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/practice/todolist.html#使用-usereducer-替代-usestate" class="sidebar-link">使用 useReducer 替代 useState</a></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#分析-1-親コンポーネントが子コンポーネントに提供する-addtodo-関数を理解するには" class="sidebar-link">分析 1：親コンポーネントが子コンポーネントに提供する addTodo 関数を理解するには？</a></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#分析-3-什麼是-action-creator-返回純函數的意思是" class="sidebar-link">分析 3 什麼是 action creator？ 返回純函數的意思是？</a></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#分析-4-iprops" class="sidebar-link">分析 4： Iprops</a></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#iprops-interface-for-tdinput-component" class="sidebar-link">IProps Interface for TdInput Component:</a></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#iprops-interface-for-tdlist-component" class="sidebar-link">IProps Interface for TdList Component:</a></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#common-aspects" class="sidebar-link">Common Aspects:</a></li><li class="sidebar-sub-header"><a href="/practice/todolist.html#iprops-in-the-todolist-input-index-tsx" class="sidebar-link">IProps in the TodoList&gt;input&gt;index.tsx</a></li></ul></li></ul></li><li><a href="/practice/shoppingcart.html" class="sidebar-link">React and TypeScript Shopping Cart Application</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#🔷-cartprovider-component" class="sidebar-link">🔷 CartProvider Component</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#_1-type-definitions" class="sidebar-link">1. Type Definitions</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#_2-action-types-definition" class="sidebar-link">2. Action Types Definition</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#_3-reducer-function" class="sidebar-link">3. Reducer Function</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#_4-custom-hook-usecartcontext" class="sidebar-link">4. Custom Hook: useCartContext</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#_5-react-context-and-provider" class="sidebar-link">5. React Context and Provider</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#usage-instructions" class="sidebar-link">Usage Instructions</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#🔻-cartprovider-code-review" class="sidebar-link">🔻 CartProvider Code review</a></li></ul></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#🔷-productsprovider-component" class="sidebar-link">🔷 ProductsProvider Component</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#_1-type-definitions-2" class="sidebar-link">1. Type Definitions</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#_2-initial-state" class="sidebar-link">2. Initial State</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#_3-context-type-definition" class="sidebar-link">3. Context Type Definition</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#_4-react-context-and-provider" class="sidebar-link">4. React Context and Provider</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#_5-fetching-and-updating-product-data" class="sidebar-link">5. Fetching and Updating Product Data</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#usage-instructions-2" class="sidebar-link">Usage Instructions</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#🔻-productsprovider-code-review" class="sidebar-link">🔻 ProductsProvider Code review</a></li></ul></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#🔷-hooks-useproducts-hook" class="sidebar-link">🔷 Hooks/useProducts Hook</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#🔷-hooks-usecart-hook" class="sidebar-link">🔷 Hooks/useCart Hook</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#🔷-components-productlist" class="sidebar-link">🔷 components/ProductList</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#🔷-components-product" class="sidebar-link">🔷 components/Product</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#トラブルシューティング" class="sidebar-link">トラブルシューティング</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#▫️-usecartcontext-hooks" class="sidebar-link">▫️ useCartContext hooks</a></li><li class="sidebar-sub-header"><a href="/practice/shoppingcart.html#▫️-usecartcontexttype" class="sidebar-link">▫️ UseCartContextType</a></li></ul></li></ul></li><li><a href="/practice/github.html" class="sidebar-link">/practice/github.html</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="todolist-app"><a href="#todolist-app" class="header-anchor">#</a> TodoList App</h1> <h2 id="プロジェクトの構成"><a href="#プロジェクトの構成" class="header-anchor">#</a> プロジェクトの構成</h2> <ul><li><p><code>TodoList</code></p> <ul><li>Manages the overall state of the todo list.</li> <li>Provides the <code>addTodo</code> function to add new todos.</li> <li>Logs the current state of the todo list.</li> <li><code>index</code>:<code>TdList</code> &amp; <code>TdInput</code></li></ul></li> <li><p><code>Input(TdInput)</code>: Responsible for the input field</p> <ul><li><code>index:</code> Main view with the input field</li> <li>Handles user input for adding new todos.</li> <li>Validates input and prevents the addition of duplicate todos.</li> <li>Calls the parent's <code>TodoList</code> addTodo function to update the todo list.</li></ul></li> <li><p><code>List(TdList)</code>: Responsible for displaying the list of todos</p> <ul><li><code>index(TdList)</code>:Manages and displays all items in the list (including all TdItems)</li> <li><code>Item(TdItem)</code>: Responsible for displaying a single item</li></ul></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TdInput <span class="token keyword">from</span> <span class="token string">&quot;./Input&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TdList <span class="token keyword">from</span> <span class="token string">&quot;./List&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">TodoList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TdInput</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TdList</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList<span class="token punctuation">;</span>
</code></pre></div><h2 id="tdinput-component"><a href="#tdinput-component" class="header-anchor">#</a> TdInput Component</h2> <ol><li>Input Handling:</li></ol> <ul><li>Utilizes the <code>useRef</code> hook to create a reference (<code>inputRef</code>) to the input element. This reference is used to access the input element's value imperatively.</li> <li>Defines a function (<code>handleAddTodoItem</code>) to handle the addition of new todo items based on user input.</li></ul> <ol start="2"><li>Validation and Interaction:</li></ol> <ul><li>Ensures that the input value is trimmed and not empty. Displays an alert if a todo with the same content already exists.</li> <li>Calls the <code>addTodo</code> function passed as a prop from the parent component (TodoList) to add a new todo item.</li></ul> <ol start="3"><li>User Interface:</li></ol> <ul><li>Renders an input field and a button within a div with the class &quot;todo-input.&quot;</li> <li>The button triggers the <code>handleAddTodoItem</code> function when clicked.</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">TdInput</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo-input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Enter your todo here<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Add</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TdInput<span class="token punctuation">;</span>
</code></pre></div><h2 id="tdlist-component"><a href="#tdlist-component" class="header-anchor">#</a> TdList Component</h2> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TdItem <span class="token keyword">from</span> <span class="token string">&quot;./Item&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">TdList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TdItem</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TdList<span class="token punctuation">;</span>
</code></pre></div><h2 id="tditem-component"><a href="#tditem-component" class="header-anchor">#</a> TdItem Component</h2> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// Each item</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">TdItem</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Placeholder text here</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TdItem<span class="token punctuation">;</span>
</code></pre></div><ul><li><p><strong>Props:</strong> Every functional component (<code>FC</code>) has a collection of external properties (<code>props</code>) that it can receive. However, in the provided <code>TdItem</code> component, no props are explicitly defined or used.</p></li> <li><p><strong>Return Value:</strong> Every functional component returns a <code>ReactElement</code>, which is an object containing properties such as <code>type</code>, <code>props</code>, <code>ref</code>, <code>key</code>, etc.</p></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token constant">FC</span><span class="token punctuation">,</span> ReactElement<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// IProps is a generic parameter, indicating the expected type of properties (props) this component should receive.</span>
<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// The component (TdInput) is declared with the FC (FunctionComponent) type, as it uses ref, and for that, generics are needed.</span>
<span class="token keyword">const</span> <span class="token literal-property property">TdInput</span><span class="token operator">:</span> <span class="token constant">FC</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">IProps</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> = (</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain-text">): ReactElement =&gt; </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain-text">;
</span></code></pre></div><blockquote><p>Takeaways:</p></blockquote> <ul><li><strong>Prop</strong>: In functional components, external properties are received through the props collection. 每一個函數組件都有一個外部傳入的 props 屬性集合。</li> <li>Every functional component has a return value, which is a ReactElement object, representing JSX. 每一個函數組件是有一個返回值的，返回的是 ReactElement 對象,即 jsx</li> <li><strong>ReactElement Object</strong>: A comprehensive object containing properties like type, props, ref, key, etc.</li></ul> <blockquote><p>Explanation:</p></blockquote> <ul><li>Props, short for properties, are external attributes passed to functional components.</li> <li>Functional components, unlike class components, inherently produce ReactElement objects as their output.</li> <li>A ReactElement is an object encapsulating information such as the component type, its properties (props),
references (ref), keys, and more, making it a fundamental unit in React's rendering process.</li></ul> <p>In summary, functional components receive external attributes through props and, in turn, generate ReactElement objects, forming the basis of JSX rendering in React applications.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token constant">FC</span><span class="token punctuation">,</span> ReactElement<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// IProps is a generic parameter, indicating the expected type of properties (props) this component should receive.</span>
<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// The component (TdInput) is declared with the FC (FunctionComponent) type, as it uses ref, and for that, generics are needed.</span>
<span class="token keyword">const</span> <span class="token literal-property property">TdInput</span><span class="token operator">:</span> <span class="token constant">FC</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">IProps</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> = (</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain-text">): ReactElement =&gt; </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain-text">;
</span></code></pre></div><blockquote><p><strong>Explanation</strong>: The TdInput component is a functional component that is expected to receive props conforming to the IProps interface. It uses the FC (FunctionComponent) type, a generic type provided by React for defining functional components. The function returns a React element (ReactElement), indicating that this component will render JSX. The empty object ({}) in the parameter list represents the expected props, and it can be adjusted based on the actual props needed by the component. This component is defined to handle input functionality within the TodoList app.</p></blockquote> <h3 id="定義-inputref"><a href="#定義-inputref" class="header-anchor">#</a> 定義 inputRef</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> inputRef <span class="token operator">=</span> useRef <span class="token operator">&lt;</span> HTMLInputElement <span class="token operator">&gt;</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="定義-itodo-接口"><a href="#定義-itodo-接口" class="header-anchor">#</a> 定義 Itodo 接口</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">interface</span> <span class="token class-name">Itodo</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  <span class="token literal-property property">description</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">status</span><span class="token operator">:</span> boolean<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="定義-iprops-src-components-todolist-input-index-tsx"><a href="#定義-iprops-src-components-todolist-input-index-tsx" class="header-anchor">#</a> 定義 Iprops <code>src/components/TodoList/Input/index.tsx</code></h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  <span class="token comment">//為什麼沒有返回值？ 因為這裡是一個函數組件，不是一個函數。</span>
  <span class="token function-variable function">addTodo</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">todo</span><span class="token operator">:</span> ITodo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 这里 addTodo 是一个属性，其类型为一个函数，这个函数接受一个 ITodo 类型的参数 todo，并且没有返回值（void）。在使用这个组件时，你需要从父组件传递一个满足这个函数签名的函数给 addTodo 属性。</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>思考</p> <ul><li>onClick 中應該放什麼？</li> <li>useRef 的使用方式： 使用了 useRef<HTMLInputElement>(null)，但您在代碼中沒有使用這個 inputRef。如果您希望在按鈕點擊時獲取輸入的值，您需要使用 inputRef.current.value。</HTMLInputElement></li></ul></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useRef<span class="token punctuation">,</span> <span class="token constant">FC</span><span class="token punctuation">,</span> ReactElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ITodo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../../types&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">addTodo</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">todo</span><span class="token operator">:</span> ITodo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token literal-property property">TdInput</span><span class="token operator">:</span> <span class="token constant">FC</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">IProps</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> = (</span><span class="token punctuation">{</span> addTodo <span class="token punctuation">}</span><span class="token plain-text">): ReactElement =&gt; </span><span class="token punctuation">{</span>
    <span class="token comment">//inputRef 是一個對象，裡面有一個current屬性，current屬性指向input元素，用於獲取input元素的值。</span>
  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> useRef<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HTMLInputElement</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">(null);

  return (
     </span><span class="token punctuation">{</span><span class="token comment">/* 这里，inputRef是一个useRef具有current属性的对象。该current属性最初设置为，但在安装组件时null将更新为指向DOM 元素。input之后，您可以使用inputRef.current来引用实际的inputDOM 元素。 */</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo-input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>please input to do list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>   <span class="token operator">??</span><span class="token operator">??</span>  <span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">add</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  );
};

export default TdInput;

</span></code></pre></div><blockquote><p>接下來，應該是對 input 取值， 那麼就需要一個 <code>handleAddTodoItem</code>的方法, 並且在 <code>onClick</code> 中調用它。</p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// IProps interface representing the properties (props) expected by the component.</span>
<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  <span class="token comment">// addTodo is a function that takes a todo (of type ITodo) and returns void.</span>
  <span class="token function-variable function">addTodo</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">todo</span><span class="token operator">:</span> ITodo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token comment">// todoList is an array of ITodo objects, representing the list of to-do items.</span>
  <span class="token literal-property property">todoList</span><span class="token operator">:</span> ITodo<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">const</span> handleAddTodoItem <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//inputRef.current用于获取输入元素（用户输入的文本）的当前值。这允许您直接访问输入字段的值，而无需使用 React 状态。当您需要在通常的 React 状态和事件处理机制之外强制访问输入字段的当前值时，这种模式很常见。</span>
  <span class="token keyword">const</span> <span class="token literal-property property">val</span><span class="token operator">:</span> string <span class="token operator">=</span> inputRef<span class="token punctuation">.</span>current<span class="token operator">!</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Check if the trimmed value is not empty</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Check if a todo with the same content already exists in the todoList</span>
    <span class="token keyword">const</span> isExist <span class="token operator">=</span> todoList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">todo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> todo<span class="token punctuation">.</span>content <span class="token operator">===</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// If a todo with the same content exists, show an alert and return from the function</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isExist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;To-do list item already exists&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

      <span class="token comment">//執行父類的addTodo方法， 把子類的val 傳給父類。</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Generate a unique id (using timestamp)</span>
      <span class="token literal-property property">content</span><span class="token operator">:</span> val<span class="token punctuation">,</span>
      <span class="token literal-property property">completed</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Clear the input field by setting its value to an empty string</span>
    inputRef<span class="token punctuation">.</span>current<span class="token operator">!</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo-input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span><span class="token comment">/* 这里，inputRef是一个useRef具有current属性的对象。该current属性最初设置为，但在安装组件时null将更新为指向DOM 元素。input之后，您可以使用inputRef.current来引用实际的inputDOM 元素。 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>please input to do list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleAddTodoItem<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">add</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


</code></pre></div><h2 id="todolist-父組件"><a href="#todolist-父組件" class="header-anchor">#</a> TodoList 父組件</h2> <ol><li>State Management:</li></ol> <ul><li>Manages the state of the todo list using the <code>useState</code> hook. The state is initialized as an empty array.</li> <li>Logs the current state of todoList using the <code>useEffect</code> hook whenever <code>todoList</code> changes.</li></ul> <ol start="2"><li>addTodo Function:</li></ol> <ul><li>Defines an addTodo function using <code>useCallback</code>. This function takes a todo item as a parameter and updates the todoList state by appending the new todo.</li> <li>The <code>useCallback</code> hook ensures that the addTodo function maintains a stable reference across renders, optimizing performance by preventing unnecessary re-renders.</li></ul> <ol start="3"><li>Rendering Child Components:</li></ol> <ul><li>Renders two child components, <code>TdInput</code> and <code>TdList</code>, within a <code>div</code> with the class &quot;todo-list.&quot;</li> <li>Passes the <code>addTodo</code> function and the current <code>todoList</code> state as props to <code>TdInput</code>.</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code>
<span class="token comment">// 定義一個狀態，用 useState，為了讓子組件能夠獲取到父組件的狀態，所以要用 useState</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>todoList<span class="token punctuation">,</span> setTodoList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>ITodo<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//當 useEffect 被觸發時，它內部的回調函數就會執行。即當新的代辦事項被添加到 todoList 時，useEffect 的回調函數就會執行。</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>todoList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>todoList<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//addTodo 函數的目的： addTodo 函數的目的是將代表待辦事項的物件添加到 todoList 狀態中。這是透過使用 setTodoList 更新 todoList 狀態實現的。</span>
<span class="token keyword">const</span> addTodo <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">todo</span><span class="token operator">:</span> ITodo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 在實際應用中，你應該使用 setTodoList 更新 todoList 狀態</span>
  <span class="token comment">// setTodoList((prevTodoList) =&gt; [...prevTodoList, todo]);</span>
  <span class="token function">setTodoList</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">todoList</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token operator">...</span>todoList<span class="token punctuation">,</span> todo<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//將 addTodo 作為 prop 傳遞給 TdInput 子組件： 在 return 語句中，addTodo 函數作為 prop 傳遞給了 TdInput 子組件，這樣子組件就能夠使用父組件中的這個函數。</span>
<span class="token keyword">return</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span><span class="token comment">/* 將 addTodo 函數作為 prop 傳遞給子組件 TdInput */</span><span class="token punctuation">}</span><span class="token plain-text">

    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TdInput</span></span> <span class="token attr-name">addTodo</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addTodo<span class="token punctuation">}</span></span> <span class="token attr-name">todoList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>todoList<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TdList</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>useCallback</code> 是 React 中的一個 Hook，用於優化函數引用，特別是在子組件的 props 中使用。在這個特定的代碼中，<code>useCallback</code> 用於優化 <code>addTodo</code> 函數的引用，以防止不必要的重新渲染。</p></blockquote> <ol><li><code>useCallback</code> 用途：</li></ol> <p>在 React 中，每次父組件渲染時，內聯函數都會被重新創建。為了避免不必要的函數重新創建，特別是在子組件的 props 中使用函數時，可以使用 <code>useCallback</code> 進行優化。在這裡，<code>useCallback</code> 用於優化 <code>addTodo</code> 函數的引用，以防止不必要的重新渲染。</p> <ol start="2"><li><code>useCallback</code> 的作用：</li></ol> <ul><li><p><strong>避免不必要的函數重新創建：</strong> 使用 <code>useCallback</code> 可以緩存函數的實例，只有當 <code>useCallback</code> 的依賴項發生變化時才會創建一個新的函數實例。這減少了子組件的不必要重新渲染，提高了應用程序性能。</p></li> <li><p><strong>子組件性能優化：</strong> 如果子組件使用了 <code>React.memo</code> 進行性能優化（防止不必要的重新渲染），<code>useCallback</code> 的使用能夠確保即使父組件重新渲染，子組件不會因 <code>addTodo</code> 函數的實際邏輯未改變而重新渲染。</p></li></ul> <blockquote><p><code>useEffect</code>: 簡單來說，當使用者在 <code>TdInput</code> 組件中點擊 &quot;add&quot; 按鈕時，<code>handleAddTodoItem</code> 函數被觸發，並且它內部調用了由父組件 <code>TodoList</code> 提供的 <code>addTodo</code> 函數。這樣做的目的是將新的待辦事項添加到父組件的 <code>todoList</code> 狀態中，從而觸發 <code>useEffect</code> 並在控制台中輸出新的 <code>todoList</code>。</p></blockquote> <h3 id="使用-usereducer-替代-usestate"><a href="#使用-usereducer-替代-usestate" class="header-anchor">#</a> 使用 useReducer 替代 useState</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">//path: todo-list-app/src/components/TodoList/reducer.ts</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">ACTION_TYPE</span><span class="token punctuation">,</span> IAction<span class="token punctuation">,</span> IState<span class="token punctuation">,</span> ITodo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./types&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//todoReducer 是一個純函數，用於處理有關待辦事項應用程序狀態的變化。</span>
<span class="token keyword">function</span> <span class="token function">todoReducer</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">state</span><span class="token operator">:</span> IState<span class="token punctuation">,</span> <span class="token literal-property property">action</span><span class="token operator">:</span> IAction</span><span class="token punctuation">)</span><span class="token operator">:</span> IState <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> payload <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">;</span>
  <span class="token comment">//返回一個IState,todoList: []的集合</span>

  <span class="token comment">//action包含兩個值：一個是payload， 另一個是type。 payload 其實就是我們要傳遞的參數，也就是todo的內容，就是const addTodo = useCallback((todo: ITodo) =&gt; 裡面的todo，另一個是type則是我們要做的事情</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">ACTION_TYPE</span><span class="token punctuation">.</span><span class="token constant">ADD_TODO</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        <span class="token literal-property property">todoList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>state<span class="token punctuation">.</span>todoList<span class="token punctuation">,</span> payload <span class="token keyword">as</span> ITodo<span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> todoReducer <span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">//path: src/components/TodoList/index.tsx</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token constant">FC</span><span class="token punctuation">,</span>
  ReactElement<span class="token punctuation">,</span>
  useCallback<span class="token punctuation">,</span>
  useEffect<span class="token punctuation">,</span>
  useReducer<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TdInput <span class="token keyword">from</span> <span class="token string">&quot;./Input&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TdList <span class="token keyword">from</span> <span class="token string">&quot;./List&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ITodo<span class="token punctuation">,</span> IState<span class="token punctuation">,</span> <span class="token constant">ACTION_TYPE</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./types&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> todoReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./reducer&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token literal-property property">initialState</span><span class="token operator">:</span> IState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">todoList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token literal-property property">TodoList</span><span class="token operator">:</span> <span class="token constant">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">ReactElement</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>todoReducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//當 useEffect 被觸發時，它內部的回調函數就會執行。，即當新的代辦事項被添加到 todoList 時，useEffect 的回調函數就會執行。</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>todoList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>state<span class="token punctuation">.</span>todoList<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//可理解為redux裡的action creator， 用來創建action，是純粹的函數， 它們返回一個action對象，而這個對象然後被傳遞給 dispatch()方法。</span>
  <span class="token keyword">const</span> addTodo <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">todo</span><span class="token operator">:</span> ITodo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// setTodoList((todoList) =&gt; [...todoList, todo]);</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">ACTION_TYPE</span><span class="token punctuation">.</span><span class="token constant">ADD_TODO</span><span class="token punctuation">,</span>
      <span class="token literal-property property">payload</span><span class="token operator">:</span> todo<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TdInput</span></span> <span class="token attr-name">addTodo</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addTodo<span class="token punctuation">}</span></span> <span class="token attr-name">todoList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>todoList<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TdList</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList<span class="token punctuation">;</span>
</code></pre></div><h3 id="分析-1-親コンポーネントが子コンポーネントに提供する-addtodo-関数を理解するには"><a href="#分析-1-親コンポーネントが子コンポーネントに提供する-addtodo-関数を理解するには" class="header-anchor">#</a> 分析 1：親コンポーネントが子コンポーネントに提供する addTodo 関数を理解するには？</h3> <p>在提供給 <code>TdInput</code> 子組件的 <code>addTodo</code> 函數和 <code>handleAddTodoItem</code> 函數之間有一個簡單的對應關係：</p> <ol><li><strong><code>addTodo</code> 函數:</strong> <ul><li>定義在父組件 <code>TodoList</code> 中。</li> <li>使用 <code>useCallback</code> 優化函數引用。</li> <li>負責將新的待辦事項（<code>todo</code> 物件）添加到 <code>todoList</code> 狀態中。</li></ul></li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> addTodo <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">todo</span><span class="token operator">:</span> ITodo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">ACTION_TYPE</span><span class="token punctuation">.</span><span class="token constant">ADD_TODO</span><span class="token punctuation">,</span>
    <span class="token literal-property property">payload</span><span class="token operator">:</span> todo<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li><strong><code>handleAddTodoItem</code> 函數:</strong> <ul><li>定義在子組件 <code>TdInput</code> 中。</li> <li>負責處理使用者輸入的待辦事項，並通過呼叫父組件提供的 <code>addTodo</code> 函數將新的待辦事項添加到 <code>todoList</code> 中。</li></ul></li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> handleAddTodoItem <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...（省略其他處理邏輯）</span>
  <span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> val<span class="token punctuation">,</span>
    <span class="token literal-property property">completed</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...（省略其他處理邏輯）</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/docs/guide/images/react/todolist.png" alt="todolist"></p> <ol><li><p><strong><code>TodoList</code> 組件：</strong></p> <ul><li><code>TodoList</code> 組件是一個 React 函數組件，負責渲染待辦事項應用的主要 UI。</li> <li>使用 <code>useReducer</code> Hook 管理狀態，並將狀態和派發函數 <code>dispatch</code> 作為 <code>todoReducer</code> 的參數。</li></ul></li> <li><p><strong><code>TdInput</code> 組件：</strong></p> <ul><li><code>TdInput</code> 組件是 <code>TodoList</code> 組件的子組件，負責處理待辦事項的輸入部分。</li> <li>接收 <code>addTodo</code> 函數作為 prop，用來添加新的待辦事項。</li> <li>使用 <code>inputRef</code> 來獲取用戶輸入的值，並在點擊 &quot;add&quot; 按鈕時調用 <code>handleAddTodoItem</code> 函數。</li></ul></li> <li><p><strong><code>todoReducer</code> 函數：</strong></p> <ul><li><code>todoReducer</code> 是一個純函數，用於處理與待辦事項應用的狀態相關的操作。</li> <li>接收當前應用程序的狀態 (<code>state</code>) 和一個描述操作的對象 (<code>action</code>)。</li> <li>在這個特定的應用中，只處理一種操作類型 <code>ACTION_TYPE.ADD_TODO</code>，用來將新的待辦事項添加到 <code>todoList</code> 中。</li></ul></li></ol> <p>這三個組件/函數之間的關係是通過 React 的層級組件結構和 props 傳遞建立的。主要的工作流程是：</p> <ul><li>在 <code>TodoList</code> 組件中使用 <code>useReducer</code> 來初始化應用的狀態並獲取 <code>dispatch</code> 函數。</li> <li><code>TodoList</code> 將狀態和 <code>addTodo</code> 函數作為 prop 傳遞給 <code>TdInput</code> 子組件。</li> <li>在 <code>TdInput</code> 中，使用 <code>inputRef</code> 獲取用戶輸入的值，並在點擊 &quot;add&quot; 按鈕時調用 <code>addTodo</code> 函數。</li> <li><code>addTodo</code> 函數內部調用 <code>dispatch</code> 並傳遞一個描述添加待辦事項操作的 action 對象。</li> <li><code>dispatch</code> 調用 <code>todoReducer</code> 函數來修改應用的狀態。</li> <li><code>useEffect</code> Hook 監聽 <code>state.todoList</code> 的變化，並在變化時輸出日誌。</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code>
<span class="token comment">//path: todo-list-app/src/components/TodoList/reducer.ts</span>
<span class="token comment">/**
 * Redux 中 reducer 函數內的 switch case，用於處理不同的 action types。

 * 在 todoReducer 中，這些 case 實際上是 action types 的不同分支，用於決定根據不同的 action type 如何更新應用的狀態。

 * Reducer 是一個純函數，它接收先前的狀態和一個 action 物件，然後根據 action 的類型執行相應的操作，返回新的狀態。
 */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">ACTION_TYPE</span><span class="token punctuation">,</span> IAction<span class="token punctuation">,</span> IState<span class="token punctuation">,</span> ITodo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./types&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">todoReducer</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">state</span><span class="token operator">:</span> IState<span class="token punctuation">,</span> <span class="token literal-property property">action</span><span class="token operator">:</span> IAction</span><span class="token punctuation">)</span><span class="token operator">:</span> IState <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> payload <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">;</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">ACTION_TYPE</span><span class="token punctuation">.</span><span class="token constant">ADD_TODO</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        <span class="token literal-property property">todoList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>state<span class="token punctuation">.</span>todoList<span class="token punctuation">,</span> payload <span class="token keyword">as</span> ITodo<span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">/**
       * 這裡的目的是從 todoList 中移除指定 id 的待辦事項。具體步驟如下：

      1. 使用 filter 方法遍歷 state.todoList 中的每個待辦事項 (todo)。
      2. 對於每個待辦事項，檢查其 id 是否等於 payload（payload 是從 action 中傳入的待辦事項的 id）。
      3. 如果待辦事項的 id 與 payload 不相等，則保留該待辦事項；如果相等，則過濾掉該待辦事項。
      4. 將過濾後的待辦事項列表更新到新的 state 中。
       */</span>

    <span class="token keyword">case</span> <span class="token constant">ACTION_TYPE</span><span class="token punctuation">.</span><span class="token constant">REMOVE_TODO</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        <span class="token literal-property property">todoList</span><span class="token operator">:</span> state<span class="token punctuation">.</span>todoList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">todo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> todo<span class="token punctuation">.</span>id <span class="token operator">!==</span> payload<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 這裡的目的是切換指定 `id` 的待辦事項的完成狀態（`completed`）。具體步驟如下：

      1. 使用 `map` 方法遍歷 `state.todoList` 中的每個待辦事項 (`todo`)。
      2. 對於每個待辦事項，檢查其 `id` 是否等於 `payload`（`payload` 是從 `action` 中傳入的待辦事項的 `id`）。
      3. 如果待辦事項的 `id` 與 `payload` 相等，則將該待辦事項的 `completed` 狀態取反（切換完成狀態）。
      4. 將修改後的待辦事項列表更新到新的 `state` 中。
     */</span>

    <span class="token keyword">case</span> <span class="token constant">ACTION_TYPE</span><span class="token punctuation">.</span><span class="token constant">TOGGLE_TODO</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        <span class="token literal-property property">todoList</span><span class="token operator">:</span> state<span class="token punctuation">.</span>todoList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">todo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> todo<span class="token punctuation">.</span>id <span class="token operator">===</span> payload
            <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token operator">...</span>todo<span class="token punctuation">,</span> <span class="token literal-property property">completed</span><span class="token operator">:</span> <span class="token operator">!</span>todo<span class="token punctuation">.</span>completed <span class="token punctuation">}</span>
            <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>todo <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> todoReducer <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="分析-3-什麼是-action-creator-返回純函數的意思是"><a href="#分析-3-什麼是-action-creator-返回純函數的意思是" class="header-anchor">#</a> 分析 3 什麼是 action creator？ 返回純函數的意思是？</h3> <p>在 Redux 中，一個 action creator 是一個返回 action 物件的函數。這個 action 物件包含了描述 action 類型（type）和相關數據（payload）的信息。一個典型的 action creator 純函數如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// action creator</span>
<span class="token keyword">const</span> <span class="token function-variable function">addTodo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;ADD_TODO&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      text<span class="token punctuation">,</span>
      <span class="token literal-property property">completed</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 action creator 來創建一個 action 物件</span>
<span class="token keyword">const</span> newTodoAction <span class="token operator">=</span> <span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token string">&quot;Buy groceries&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在這個例子中，<code>addTodo</code> 是一個 action creator 函數。當你調用它時，它返回一個包含 action 信息的物件。這個 action 物件至少包含 <code>type</code> 屬性，用來指定 action 的類型，以及 <code>payload</code> 屬性，用來包含相關的數據。</p> <p>Redux 的 reducer 函數則根據這些 action 物件的 <code>type</code> 屬性，來決定如何更新應用的狀態。在 reducer 內部，通常使用一個 switch case 來處理不同的 action types。這就是為什麼在 Redux 中的 action creators 是純函數的原因，因為它們返回一個描述 action 的純函數，而不執行對應的非純操作。</p> <p>簡而言之，Redux 中的 action creators 是純函數，因為它們只返回描述 action 的物件，而不執行其他可能引起副作用的操作。這有助於保持 Redux 應用的可預測性和可測試性。</p> <h3 id="分析-4-iprops"><a href="#分析-4-iprops" class="header-anchor">#</a> 分析 4： Iprops</h3> <p>//IProps 具有属性 todoList、toggleTodo 和 的接口 removeTodo 用于 TdItem(item) 和 TdList(list) 组件，以定义这些组件应接收的预期 props。</p> <h3 id="iprops-interface-for-tdinput-component"><a href="#iprops-interface-for-tdinput-component" class="header-anchor">#</a> <code>IProps</code> Interface for <code>TdInput</code> Component:</h3> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">addTodo</span><span class="token operator">:</span> <span class="token punctuation">(</span>todo<span class="token operator">:</span> ITodo<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  todoList<span class="token operator">:</span> ITodo<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p><code>addTodo</code>: This property is a function that takes an <code>ITodo</code> parameter and returns <code>void</code>. It suggests that the <code>TdInput</code> component expects a function to be passed down that will handle the addition of a new todo item to the list.</p></li> <li><p><code>todoList</code>: This property is an array of <code>ITodo</code> items. It represents the list of todos that the <code>TdInput</code> component needs access to, possibly for checking if a todo already exists before adding a new one.</p></li></ul> <h3 id="iprops-interface-for-tdlist-component"><a href="#iprops-interface-for-tdlist-component" class="header-anchor">#</a> <code>IProps</code> Interface for <code>TdList</code> Component:</h3> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  todoList<span class="token operator">:</span> ITodo<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function-variable function">toggleTodo</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function-variable function">removeTodo</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p><code>todoList</code>: This property is an array of <code>ITodo</code> items. It represents the list of todos that the <code>TdList</code> component will render.</p></li> <li><p><code>toggleTodo</code>: This property is a function that takes a <code>number</code> (presumably the id of a todo item) and returns <code>void</code>. It suggests that the <code>TdList</code> component expects a function to be passed down that will handle toggling the completion status of a todo item.</p></li> <li><p><code>removeTodo</code>: This property is a function that takes a <code>number</code> (presumably the id of a todo item) and returns <code>void</code>. It suggests that the <code>TdList</code> component expects a function to be passed down that will handle removing a todo item from the list.</p></li></ul> <h3 id="common-aspects"><a href="#common-aspects" class="header-anchor">#</a> Common Aspects:</h3> <ul><li>Both interfaces include a <code>todoList</code> property, indicating that both components need access to the list of todos.</li> <li>The <code>ITodo</code> type is referenced in both interfaces, suggesting that it defines the structure of a todo item.</li></ul> <p>Understanding these interfaces helps clarify what kind of props each component expects and how they interact with the rest of the application.</p> <h3 id="iprops-in-the-todolist-input-index-tsx"><a href="#iprops-in-the-todolist-input-index-tsx" class="header-anchor">#</a> <code>IProps</code> in the <code>TodoList&gt;input&gt;index.tsx</code></h3> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">//path: src/components/TodoList/Input/index.tsx</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useRef<span class="token punctuation">,</span> <span class="token constant">FC</span><span class="token punctuation">,</span> ReactElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ITodo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../types&quot;</span><span class="token punctuation">;</span>

<span class="token comment">//addTodo接口中属性的存在IProps表明TdInput组件期望将函数作为 prop 传递，并且该函数应该具有签名(todo: ITodo) =&gt; void。这表明该函数的目的可能是处理添加新的待办事项。</span>
<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  <span class="token comment">//addTodo：它是一个以ITodo对象作为参数并返回的函数void。该函数预计可以处理添加新的待办事项。</span>
  <span class="token function-variable function">addTodo</span><span class="token operator">:</span> <span class="token punctuation">(</span>todo<span class="token operator">:</span> ITodo<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

  <span class="token comment">//todoList：它是一个对象数组ITodo。该数组表示组件将与之交互的待办事项列表TdInput，专门用于检查列表中是否已存在新的待办事项。</span>
  todoList<span class="token operator">:</span> ITodo<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * addTodoProp： 是一个向下传递给TdInput组件的函数。在函数内部handleAddTodoItem，当即将添加新的待办事项时，将调用此函数。该addTodo函数负责将新的待办事项添加到整个待办事项列表中。

 * todoListProp： 是待办事项的数组。它在handleAddTodoItem函数中用于检查列表中是否已存在具有相同内容的新待办事项。如果是，则会显示警报，并且不会添加新的待办事项。
 */</span>

<span class="token keyword">const</span> TdInput<span class="token operator">:</span> <span class="token constant">FC</span><span class="token operator">&lt;</span>IProps<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> addTodo<span class="token punctuation">,</span> todoList <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> ReactElement <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> handleAddTodoItem <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> val<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> inputRef<span class="token punctuation">.</span>current<span class="token operator">!</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> isExist <span class="token operator">=</span> todoList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> todo<span class="token punctuation">.</span>content <span class="token operator">===</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>isExist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;to do list has existed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">//在该函数中，addTodo使用新的 todo 对象作为参数来调用该函数。addTodo这与界面中的属性设置的期望一致IProps。</span>
      <span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> val<span class="token punctuation">,</span>
        completed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      inputRef<span class="token punctuation">.</span>current<span class="token operator">!</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo-input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>please input to do list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleAddTodoItem<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">add</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TdInput<span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/practice/" class="prev router-link-active">
        プラクティス
      </a></span> <span class="next"><a href="/practice/shoppingcart.html">
        React and TypeScript Shopping Cart Application
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.204ed3d4.js" defer></script><script src="/assets/js/2.a44fb3b0.js" defer></script><script src="/assets/js/1.8d37d391.js" defer></script><script src="/assets/js/56.710acef5.js" defer></script>
  </body>
</html>
