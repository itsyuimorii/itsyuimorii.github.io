<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>⚪️ 【JavaScript 入門】 配列の使い方と操作まとめ（初期化・追加・結合・検索・削除） | ☻ itsyuimorii.space</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content=" ">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.204ed3d4.js" as="script"><link rel="preload" href="/assets/js/2.a44fb3b0.js" as="script"><link rel="preload" href="/assets/js/1.8d37d391.js" as="script"><link rel="preload" href="/assets/js/29.844af673.js" as="script"><link rel="prefetch" href="/assets/js/10.d8df69df.js"><link rel="prefetch" href="/assets/js/11.2a97faa3.js"><link rel="prefetch" href="/assets/js/12.5fd72f78.js"><link rel="prefetch" href="/assets/js/13.767d92f0.js"><link rel="prefetch" href="/assets/js/14.09112e04.js"><link rel="prefetch" href="/assets/js/15.2d87bde7.js"><link rel="prefetch" href="/assets/js/16.d6bec5e2.js"><link rel="prefetch" href="/assets/js/17.3dbcb51f.js"><link rel="prefetch" href="/assets/js/18.4c170722.js"><link rel="prefetch" href="/assets/js/19.1b72b4a4.js"><link rel="prefetch" href="/assets/js/20.9741499c.js"><link rel="prefetch" href="/assets/js/21.7f8f7869.js"><link rel="prefetch" href="/assets/js/22.3f20ce36.js"><link rel="prefetch" href="/assets/js/23.7c0322e8.js"><link rel="prefetch" href="/assets/js/24.fa4b7294.js"><link rel="prefetch" href="/assets/js/25.4b75e33e.js"><link rel="prefetch" href="/assets/js/26.6ccb7807.js"><link rel="prefetch" href="/assets/js/27.6c078df5.js"><link rel="prefetch" href="/assets/js/28.520f43fd.js"><link rel="prefetch" href="/assets/js/3.f8c28e7e.js"><link rel="prefetch" href="/assets/js/30.b352e55d.js"><link rel="prefetch" href="/assets/js/31.c2296a43.js"><link rel="prefetch" href="/assets/js/32.f990ea1b.js"><link rel="prefetch" href="/assets/js/33.e2f64269.js"><link rel="prefetch" href="/assets/js/34.b9fe4fba.js"><link rel="prefetch" href="/assets/js/35.6015d88a.js"><link rel="prefetch" href="/assets/js/36.2ee99065.js"><link rel="prefetch" href="/assets/js/37.9bd0a687.js"><link rel="prefetch" href="/assets/js/38.04db86c7.js"><link rel="prefetch" href="/assets/js/39.1fe91b86.js"><link rel="prefetch" href="/assets/js/4.9eb8282d.js"><link rel="prefetch" href="/assets/js/40.43f0acc3.js"><link rel="prefetch" href="/assets/js/41.7bcb3391.js"><link rel="prefetch" href="/assets/js/42.d64e546e.js"><link rel="prefetch" href="/assets/js/43.a2cbbfc3.js"><link rel="prefetch" href="/assets/js/44.0492f992.js"><link rel="prefetch" href="/assets/js/45.af66bbe7.js"><link rel="prefetch" href="/assets/js/46.c1c9a53c.js"><link rel="prefetch" href="/assets/js/47.7a2bd268.js"><link rel="prefetch" href="/assets/js/48.0376d3a5.js"><link rel="prefetch" href="/assets/js/49.60535624.js"><link rel="prefetch" href="/assets/js/5.4ceb5601.js"><link rel="prefetch" href="/assets/js/50.88e721ab.js"><link rel="prefetch" href="/assets/js/51.a1a8ca8d.js"><link rel="prefetch" href="/assets/js/52.19d2519d.js"><link rel="prefetch" href="/assets/js/53.891befed.js"><link rel="prefetch" href="/assets/js/54.b3d8b254.js"><link rel="prefetch" href="/assets/js/55.a4b8b234.js"><link rel="prefetch" href="/assets/js/56.710acef5.js"><link rel="prefetch" href="/assets/js/6.cb88f024.js"><link rel="prefetch" href="/assets/js/7.0f51d652.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.8ee43d73.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">☻ itsyuimorii.space</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="✸ノート" class="dropdown-title"><span class="title">✸ノート</span> <span class="arrow down"></span></button> <button type="button" aria-label="✸ノート" class="mobile-dropdown-title"><span class="title">✸ノート</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          「学習ノート」
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/react/" class="nav-link">
  ▫️ React.js
</a></li><li class="dropdown-subitem"><a href="/guide/typescript/" class="nav-link">
  ▫️ Typescript
</a></li><li class="dropdown-subitem"><a href="/guide/javascript/" class="nav-link router-link-active">
  ▫️ Javascript
</a></li><li class="dropdown-subitem"><a href="/guide/nextjs/" class="nav-link">
  ▫️ Next.js
</a></li></ul></li><li class="dropdown-item"><h4>
          「メモ帳」
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/memo/" class="nav-link">
  ▫️ memoメモ
</a></li><li class="dropdown-subitem"><a href="/practice/" class="nav-link">
  ▫️ プラクティス
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="✸すべてを記録する" class="dropdown-title"><span class="title">✸すべてを記録する</span> <span class="arrow down"></span></button> <button type="button" aria-label="✸すべてを記録する" class="mobile-dropdown-title"><span class="title">✸すべてを記録する</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          ライフ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/life/reading/" class="nav-link">
  読書メモ
</a></li><li class="dropdown-subitem"><a href="/life/moment/" class="nav-link">
  モーメント
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/itsyuimorii" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="✸ノート" class="dropdown-title"><span class="title">✸ノート</span> <span class="arrow down"></span></button> <button type="button" aria-label="✸ノート" class="mobile-dropdown-title"><span class="title">✸ノート</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          「学習ノート」
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/react/" class="nav-link">
  ▫️ React.js
</a></li><li class="dropdown-subitem"><a href="/guide/typescript/" class="nav-link">
  ▫️ Typescript
</a></li><li class="dropdown-subitem"><a href="/guide/javascript/" class="nav-link router-link-active">
  ▫️ Javascript
</a></li><li class="dropdown-subitem"><a href="/guide/nextjs/" class="nav-link">
  ▫️ Next.js
</a></li></ul></li><li class="dropdown-item"><h4>
          「メモ帳」
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/memo/" class="nav-link">
  ▫️ memoメモ
</a></li><li class="dropdown-subitem"><a href="/practice/" class="nav-link">
  ▫️ プラクティス
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="✸すべてを記録する" class="dropdown-title"><span class="title">✸すべてを記録する</span> <span class="arrow down"></span></button> <button type="button" aria-label="✸すべてを記録する" class="mobile-dropdown-title"><span class="title">✸すべてを記録する</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          ライフ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/life/reading/" class="nav-link">
  読書メモ
</a></li><li class="dropdown-subitem"><a href="/life/moment/" class="nav-link">
  モーメント
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/itsyuimorii" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/guide/javascript/" aria-current="page" class="sidebar-link">Javascript guide</a></li><li><a href="/guide/javascript/js-array.html" aria-current="page" class="active sidebar-link">⚪️ 【JavaScript 入門】 配列の使い方と操作まとめ（初期化・追加・結合・検索・削除）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔶-【実践】「配列」の活用技" class="sidebar-link">🔶 【実践】「配列」の活用技</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔶-方法详解" class="sidebar-link">🔶 方法详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-1-push" class="sidebar-link">🔸 1. push()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-2-unshift" class="sidebar-link">🔸 2. unshift()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-3-pop" class="sidebar-link">🔸 3. pop()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-4-shift" class="sidebar-link">🔸 4. shift()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-5-reverse" class="sidebar-link">🔸 5. reverse()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-6-sort" class="sidebar-link">🔸 6. sort()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-7-splice" class="sidebar-link">🔸 7. splice()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#为什么需要深拷贝" class="sidebar-link">为什么需要深拷贝？</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#正确的做法" class="sidebar-link">正确的做法</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-8-concat" class="sidebar-link">🔸 8. concat()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-9-join" class="sidebar-link">🔸 9. join()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-10-slice" class="sidebar-link">🔸 10. slice()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-11-tostring" class="sidebar-link">🔸 11. toString()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-12-valueof" class="sidebar-link">🔸 12. valueOf()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-13-indexof" class="sidebar-link">🔸 13. indexOf()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-14-lastindexof" class="sidebar-link">🔸 14. lastIndexOf()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-15-foreach" class="sidebar-link">🔸 15. forEach()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-16-map" class="sidebar-link">🔸 16. map()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-17-filter" class="sidebar-link">🔸 17. filter()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-18-every" class="sidebar-link">🔸 18. every()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-19-some" class="sidebar-link">🔸 19. some()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-20-reduce" class="sidebar-link">🔸 20. reduce()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-21-reduceright" class="sidebar-link">🔸 21. reduceRight()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#🔸-22-includes" class="sidebar-link">🔸 22. includes()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#_23-🔸-from" class="sidebar-link">23.🔸 from()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#_24-🔸-find" class="sidebar-link">24. 🔸 find()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#_25-🔸-findindex" class="sidebar-link">25. 🔸 findIndex()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#_26-🔸-fill" class="sidebar-link">26. 🔸 fill()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#_27-🔸-flat" class="sidebar-link">27. 🔸 flat()</a></li><li class="sidebar-sub-header"><a href="/guide/javascript/js-array.html#_28-🔸-flatmap" class="sidebar-link">28. 🔸 flatMap()</a></li></ul></li></ul></li><li><a href="/guide/javascript/js-study-notes.html" class="sidebar-link">⚪️ Javascript -articles の研究例をいくつか</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="⚪️-【javascript-入門】-配列の使い方と操作まとめ-初期化・追加・結合・検索・削除"><a href="#⚪️-【javascript-入門】-配列の使い方と操作まとめ-初期化・追加・結合・検索・削除" class="header-anchor">#</a> ⚪️ 【JavaScript 入門】 配列の使い方と操作まとめ（初期化・追加・結合・検索・削除）</h1> <h2 id="🔶-【実践】「配列」の活用技"><a href="#🔶-【実践】「配列」の活用技" class="header-anchor">#</a> 🔶 【実践】「配列」の活用技</h2> <p>当然可以。下面是一个表格，展示了各个 JavaScript 数组方法的功能、返回值、是否改变原数组以及它们被引入的 ECMAScript 版本。</p> <table><thead><tr><th>顺序</th> <th>方法名</th> <th>功能</th> <th>返回值</th> <th>是否改变原数组</th> <th>版本</th></tr></thead> <tbody><tr><td>1</td> <td><code>push()</code></td> <td>向数组添加一个或多个元素（在数组尾部）</td> <td>新数组的长度</td> <td>是</td> <td>ES5-</td></tr> <tr><td>2</td> <td><code>unshift()</code></td> <td>向数组添加一个或多个元素（在数组头部）</td> <td>新数组的长度</td> <td>是</td> <td>ES5-</td></tr> <tr><td>3</td> <td><code>pop()</code></td> <td>删除数组的最后一个元素</td> <td>被删除的元素</td> <td>是</td> <td>ES5-</td></tr> <tr><td>4</td> <td><code>shift()</code></td> <td>删除数组的第一个元素</td> <td>被删除的元素</td> <td>是</td> <td>ES5-</td></tr> <tr><td>5</td> <td><code>reverse()</code></td> <td>反转数组中的元素</td> <td>反转后的数组</td> <td>是</td> <td>ES5-</td></tr> <tr><td>6</td> <td><code>sort()</code></td> <td>对数组进行排序（默认按字符串 Unicode 码点）</td> <td>排序后的数组</td> <td>是</td> <td>ES5-</td></tr> <tr><td>7</td> <td><code>splice()</code></td> <td>在指定位置删除或添加元素（可用于数组的增删改）</td> <td>被删除的元素组成的数组</td> <td>是</td> <td>ES5-</td></tr> <tr><td>8</td> <td><code>concat()</code></td> <td>合并多个数组，返回新数组</td> <td>合并后的数组</td> <td>否</td> <td>ES5-</td></tr> <tr><td>9</td> <td><code>join()</code></td> <td>将数组元素用特定字符连接成字符串</td> <td>拼接后的字符串</td> <td>否</td> <td>ES5-</td></tr> <tr><td>10</td> <td><code>slice()</code></td> <td>从数组中提取一段元素，返回新数组</td> <td>提取的元素组成的新数组</td> <td>否</td> <td>ES5-</td></tr> <tr><td>11</td> <td><code>toString()</code></td> <td>将数组转换为字符串</td> <td>字符串表示的数组</td> <td>否</td> <td>ES5-</td></tr> <tr><td>12</td> <td><code>valueOf()</code></td> <td>返回数组的原始值</td> <td>数组的原始值</td> <td>否</td> <td>ES5-</td></tr> <tr><td>13</td> <td><code>indexOf()</code></td> <td>查询数组中某元素首次出现的位置</td> <td>元素位置，若不存在则返回-1</td> <td>否</td> <td>ES5-</td></tr> <tr><td>14</td> <td><code>lastIndexOf()</code></td> <td>反向查询数组中某元素首次出现的位置</td> <td>元素位置，若不存在则返回-1</td> <td>否</td> <td>ES5-</td></tr> <tr><td>15</td> <td><code>forEach()</code></td> <td>遍历数组，对每个元素执行回调函数</td> <td>无（<code>undefined</code>）</td> <td>否</td> <td>ES5-</td></tr> <tr><td>16</td> <td><code>map()</code></td> <td>遍历数组，使用回调函数处理每个元素，并返回新数组</td> <td>新数组</td> <td>否</td> <td>ES5-</td></tr> <tr><td>17</td> <td><code>filter()</code></td> <td>遍历数组，筛选符合条件的元素，返回新数组</td> <td>符合条件的元素组成的新数组</td> <td>否</td> <td>ES5-</td></tr> <tr><td>18</td> <td><code>every()</code></td> <td>检测数组所有元素是否都满足条件</td> <td>所有元素满足返回<code>true</code>，否则<code>false</code></td> <td>否</td> <td>ES5-</td></tr> <tr><td>19</td> <td><code>some()</code></td> <td>检测数组中是否存在满足条件的元素</td> <td>存在满足条件的元素返回<code>true</code>，否则<code>false</code></td> <td>否</td> <td>ES5-</td></tr> <tr><td>20</td> <td><code>reduce()</code></td> <td>从左到右应用一个函数对数组元素进行累计/归约</td> <td>操作结果</td> <td>否</td> <td>ES5-</td></tr> <tr><td>21</td> <td><code>reduceRight()</code></td> <td>从右到左应用一个函数对数组元素进行累计/归约</td> <td>操作结果</td> <td>否</td> <td>ES5-</td></tr> <tr><td>22</td> <td><code>includes()</code></td> <td></td> <td></td> <td></td> <td></td></tr></tbody></table> <p>判断数组是否包含特定值 | 包含则返回<code>true</code>，否则<code>false</code> | 否 | ES6 |
| 23 | <code>Array.from()</code> | 从类数组或可迭代对象创建新数组 | 新数组 | 否 | ES6 |
| 24 | <code>find()</code> | 查找数组中满足条件的第一个元素 | 满足条件的元素，否则<code>undefined</code> | 否 | ES6 |
| 25 | <code>findIndex()</code> | 查找数组中满足条件元素的索引 | 满足条件元素的索引，否则-1 | 否 | ES6 |
| 26 | <code>fill()</code> | 使用给定值填充数组 | 填充后的数组 | 是 | ES6 |
| 27 | <code>flat()</code> | 将嵌套数组&quot;拉平&quot;成一维数组 | 新数组 | 否 | ES6 |
| 28 | <code>flatMap()</code> | 先映射每个元素，然后将结果压平成一维数组 | 新数组 | 否 | ES6 |</p> <h2 id="🔶-方法详解"><a href="#🔶-方法详解" class="header-anchor">#</a> 🔶 方法详解</h2> <h3 id="🔸-1-push"><a href="#🔸-1-push" class="header-anchor">#</a> 🔸 1. <code>push()</code></h3> <ul><li>功能：在数组最后一位添加一个或多个元素，并返回新数组的长度。会改变原数组。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rel <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, &quot;c&quot;, &quot;A&quot;, &quot;B&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5 (数组长度)</span>
</code></pre></div></li></ul> <h3 id="🔸-2-unshift"><a href="#🔸-2-unshift" class="header-anchor">#</a> 🔸 2. <code>unshift()</code></h3> <ul><li>功能：在数组第一位添加一个或多个元素，并返回新数组的长度。会改变原数组。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rel <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;A&quot;, &quot;B&quot;, 1, 2, &quot;c&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5 (数组长度)</span>
</code></pre></div></li></ul> <h3 id="🔸-3-pop"><a href="#🔸-3-pop" class="header-anchor">#</a> 🔸 3. <code>pop()</code></h3> <ul><li>功能：删除数组的最后一个元素，并返回被删除的元素。会改变原数组。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rel <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// c</span>
</code></pre></div></li></ul> <h3 id="🔸-4-shift"><a href="#🔸-4-shift" class="header-anchor">#</a> 🔸 4. <code>shift()</code></h3> <ul><li>功能：删除数组的第一个元素，并返回被删除的元素。会改变原数组。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rel <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;b&quot;, &quot;c&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a</span>
</code></pre></div></li></ul> <h3 id="🔸-5-reverse"><a href="#🔸-5-reverse" class="header-anchor">#</a> 🔸 5. <code>reverse()</code></h3> <ul><li>功能：反转数组中的元素。会改变原数组。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rel <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;c&quot;, &quot;b&quot;, &quot;a&quot;, 3, 2, 1]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;c&quot;, &quot;b&quot;, &quot;a&quot;, 3, 2, 1]</span>
</code></pre></div></li></ul> <h3 id="🔸-6-sort"><a href="#🔸-6-sort" class="header-anchor">#</a> 🔸 6. <code>sort()</code></h3> <ul><li>功能：对数组的元素进行排序。默认排序顺序是根据字符串 Unicode 码点。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr1<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 默认排序结果</span>
<span class="token comment">// 使用自定义排序函数</span>
arr1<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 从小到大排序</span>
</code></pre></div></li></ul> <h3 id="🔸-7-splice"><a href="#🔸-7-splice" class="header-anchor">#</a> 🔸 7. <code>splice()</code></h3> <h4 id="功能"><a href="#功能" class="header-anchor">#</a> 功能：</h4> <ul><li>在指定位置添加或删除数组中的元素，或替换数组中的元素。会改变原数组。</li> <li><code>splice</code> 方法可以用于数组的增删改操作。</li> <li><code>splice</code> 方法的第一个参数是修改的起始位置（索引），第二个参数是删除的个数（如果是 0，则表示不删除元素），后面的参数是要添加进数组的元素。</li></ul> <h4 id="语法"><a href="#语法" class="header-anchor">#</a> 语法:</h4> <ul><li><code>array.splice(start[, deleteCount[, item1[, item2[, ...]]]])</code></li> <li><code>start</code>：指定修改的开始位置（从 0 计数）。如果超出了数组的长度，则从数组末尾开始添加内容；如果是负值，则表示从数组末位开始的第几位（从-1 计数，这意味着-n 是倒数第 n 个元素并且等价于 array.length-n），如果负数的绝对值大于数组的长度，则表示开始位置为第 0 位。</li> <li><code>deleteCount</code>：整数，表示要移除的数组元素的个数。如果<code>deleteCount</code>大于<code>start</code>之后的元素的总数，则从<code>start</code>后面的元素都将被删除（含第<code>start</code>位）。</li> <li><code>item1, item2, ...</code>：要添加进数组的元素,从<code>start</code>位置开始。如果不指定，则只删除数组元素。</li> <li>返回值：由被删除的元素组成的一个数组。如果只删除了一个元素，则返回只包含一个元素的数组。如果没有删除元素，则返回空数组。</li> <li>注意：<code>splice</code> 方法会改变原始数组。</li></ul> <h4 id="示例"><a href="#示例" class="header-anchor">#</a> 示例：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rel <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;add1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;add2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 修改后的数组</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 被删除的元素组成的数组</span>
</code></pre></div><h4 id="使用場景"><a href="#使用場景" class="header-anchor">#</a> 使用場景:</h4> <p>在 React 中，通常推荐使用不可变数据模式来更新状态，尤其是当处理数组和对象时。<code>splice</code> 方法会直接修改原数组，这可能导致 React 的状态更新行为表现得不如预期。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> newGoods <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>goods<span class="token punctuation">]</span><span class="token punctuation">;</span>
  newGoods<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 删除 splice 方法, 会改变原数组, 返回被删除的元素</span>
  <span class="token function">setGoods</span><span class="token punctuation">(</span>newGoods<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在 <code>newGoods.splice(index, 1);</code> 这行代码中，<code>splice</code> 被用于从 <code>newGoods</code> 数组中移除特定索引的元素。尽管这里使用了 <code>newGoods</code> 作为 <code>goods</code> 数组的副本，但由于数组是引用类型，在使用 <code>splice</code> 之前，应该创建 <code>goods</code> 的深拷贝。</p> <h3 id="为什么需要深拷贝"><a href="#为什么需要深拷贝" class="header-anchor">#</a> 为什么需要深拷贝？</h3> <p>当你使用 <code>newGoods = [...goods]</code> 这样的语句时，实际上创建的是原数组的浅拷贝。这意味着 <code>newGoods</code> 和 <code>goods</code> 都指向相同的元素对象。当你在 <code>newGoods</code> 上使用 <code>splice</code> 时，虽然 <code>goods</code> 数组本身没有被直接修改，但数组中的对象可能会受到影响，这可能导致 React 的不预期行为。</p> <h3 id="正确的做法"><a href="#正确的做法" class="header-anchor">#</a> 正确的做法</h3> <p>为了避免这种问题，可以使用不会改变原数组的方法来处理数组。例如，可以使用 <code>filter</code> 方法来创建一个不包含特定索引元素的新数组，而不是使用 <code>splice</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> newGoods <span class="token operator">=</span> goods<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i <span class="token operator">!==</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setGoods</span><span class="token punctuation">(</span>newGoods<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在这个修改后的 <code>remove</code> 函数中，<code>filter</code> 方法被用来创建一个新的数组，其中不包含指定索引的元素。这种方法不会修改原数组，符合 React 的不可变数据原则，能够确保状态更新的可预测性。</p> <h3 id="🔸-8-concat"><a href="#🔸-8-concat" class="header-anchor">#</a> 🔸 8. <code>concat()</code></h3> <ul><li>功能：连接两个或更多数组，并返回结果。不改变原数组。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rel <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 合并后的数组</span>
</code></pre></div></li></ul> <h3 id="🔸-9-join"><a href="#🔸-9-join" class="header-anchor">#</a> 🔸 9. <code>join()</code></h3> <ul><li>功能：将数组的所有元素连接成一个字符串。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;a-b-c-d&quot;</span>
</code></pre></div></li></ul> <h3 id="🔸-10-slice"><a href="#🔸-10-slice" class="header-anchor">#</a> 🔸 10. <code>slice()</code></h3> <ul><li>功能：返回数组的一个片段或子数组。不改变原数组。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;b&quot;, &quot;c&quot;]</span>
</code></pre></div></li></ul> <h3 id="🔸-11-tostring"><a href="#🔸-11-tostring" class="header-anchor">#</a> 🔸 11. <code>toString()</code></h3> <ul><li>功能：将数组转换为字符串。不改变原数组。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rel <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;a,b,c,d&quot;</span>
</code></pre></div></li></ul> <h3 id="🔸-12-valueof"><a href="#🔸-12-valueof" class="header-anchor">#</a> 🔸 12. <code>valueOf()</code></h3> <ul><li>功能：返回数组的原始值。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rel <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div></li></ul> <h3 id="🔸-13-indexof"><a href="#🔸-13-indexof" class="header-anchor">#</a> 🔸 13. <code>indexOf()</code></h3> <ul><li><p>功能：返回指定元素在数组中<strong>首次</strong>出现的索引。不存在则返回-1。</p></li> <li><p>示例：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> index <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div></li></ul> <h3 id="🔸-14-lastindexof"><a href="#🔸-14-lastindexof" class="header-anchor">#</a> 🔸 14. <code>lastIndexOf()</code></h3> <ul><li>功能：返回指定元素在数组中最后一次出现的索引。不存在则返回-1。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> index <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div></li></ul> <h3 id="🔸-15-foreach"><a href="#🔸-15-foreach" class="header-anchor">#</a> 🔸 15. <code>forEach()</code></h3> <h4 id="功能-2"><a href="#功能-2" class="header-anchor">#</a> 功能：</h4> <ul><li><p>对数组的每个元素执行一次提供的函数, <em>不改变原数组</em></p> <ul><li><code>forEach</code> cannot directly handle asynchronous operations with <code>await</code>.(<code>forEach</code> `doesn't wait for promises to resolve before moving on to the next iteration.)</li></ul></li> <li><p>forEach()方法需要一个回调函数（这种函数，是由我们创建但是不由我们调用的）作为参数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>回调函数中传递三个参数：</p> <ul><li>第一个参数，就是当前正在遍历的元素</li> <li>第二个参数，就是当前正在遍历的元素的索引</li> <li>第三个参数，就是正在遍历的数组</li></ul></li> <li><p><code>forEach</code>本身是没有中断机制的。内部是遍历执行回调的。</p> <ul><li>在回调中增加判断条件，满足条件就抛出异常。（通常是不建议这么跳出循环的）</li> <li>使用 <code>for(let item in arr) {}</code>这样的遍历方式，可以提前跳出循环</li> <li>使用<code>.some</code> 方法，一些场景判断，满足条件可以提前结束</li></ul></li></ul> <h4 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> 示例：</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//基本for 循環支持 await, 但是效率會很低.</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arrs <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> datas <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arrs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://jsonplaceholder.typicode.com/todos/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arrs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    datas<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> datas<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="使用場景-2"><a href="#使用場景-2" class="header-anchor">#</a> 使用場景:</h4> <p>当您需要对数组中的每个元素执行异步操作，例如逐个上传图片，但不需要收集这些异步操作的返回值时，您可以使用 <code>forEach</code> 方法结合 <code>async/await</code>。请注意，虽然 <code>forEach</code> 不能直接处理 <code>await</code>，但您可以在 <code>forEach</code> 的回调函数中定义一个立即执行的异步函数来实现这一点。</p> <p>以下是一个例子，演示了如何使用 <code>forEach</code> 方法逐个上传图片：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">uploadImage</span><span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这里是一个假设的上传函数，实际情况下应替换为实际的上传逻辑</span>
  <span class="token comment">// 假设这个函数返回一个 Promise</span>
  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;https://example.com/upload&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">body</span><span class="token operator">:</span> image<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">uploadImages</span><span class="token punctuation">(</span><span class="token parameter">images</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  images<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">uploadImage</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Image uploaded:&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Error uploading image:&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 假设这个数组包含了要上传的图片</span>
<span class="token keyword">const</span> imageArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;image1.png&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;image2.png&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;image3.png&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">uploadImages</span><span class="token punctuation">(</span>imageArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在这个例子中：</p> <ol><li><code>uploadImage</code> 函数是一个异步函数，用于上传单个图片，并返回一个 Promise 对象。</li> <li><code>uploadImages</code> 函数接受一个图片数组，使用 <code>forEach</code> 遍历这个数组。</li> <li>在 <code>forEach</code> 的回调函数中，我们定义了一个立即执行的异步函数来处理图片上传。</li> <li>每个图片上传的结果将会被打印出来，但整个 <code>uploadImages</code> 函数本身不会返回任何结果。</li></ol> <p>请注意，由于 <code>forEach</code> 并不等待异步操作完成，所有的上传操作将会几乎同时开始，这可能会对服务器造成压力。如果需要控制上传速度，比如一次只上传一个图片，您可能需要使用基本的 <code>for</code> 循环或其他方法来顺序执行异步操作。</p> <h4 id="其他可能場景"><a href="#其他可能場景" class="header-anchor">#</a> 其他可能場景:</h4> <ol><li><p><strong>处理菜单项</strong>：</p> <ul><li>如果您有一个菜单项数组，您可能需要使用 <code>forEach</code> 来遍历每个菜单项，以生成展示在网页上的菜单列表。</li> <li>对于每个菜单项，可能还需要根据特定属性（如类别、价格区间、是否为素食等）进行进一步处理或分类。</li></ul></li> <li><p><strong>处理顾客评论</strong>：</p> <ul><li>如果您的网站有顾客评论功能，您可以使用 <code>forEach</code> 遍历评论数组，展示每个顾客的评分和评论。</li></ul></li> <li><p><strong>订单处理</strong>：</p> <ul><li>在订单确认页面，您可能需要遍历订单中的每个项目，计算总价或应用折扣。</li> <li>如果需要将订单中的每个项目发送到后端处理（如库存检查、订单入库等），也可以使用 <code>forEach</code>。</li></ul></li> <li><p><strong>图片或媒体内容展示</strong>：</p> <ul><li>如果餐厅网站有图库展示餐厅内部、菜品等，您可以使用 <code>forEach</code> 来遍历图片数组，为每张图片创建相应的 HTML 元素。</li></ul></li> <li><p><strong>员工管理</strong>：</p> <ul><li>在员工管理界面，<code>forEach</code> 可用于遍历员工列表，显示员工信息，或进行特定操作，如计算工资、安排班次等。</li></ul></li> <li><p><strong>库存管理</strong>：</p> <ul><li>对于库存管理，<code>forEach</code> 可以用于遍历库存列表，更新库存状态或进行库存预警。</li></ul></li> <li><p><strong>特殊活动或促销信息展示</strong>：</p> <ul><li>如果餐厅有特殊活动或促销，您可以使用 <code>forEach</code> 遍历活动数组，动态生成展示这些活动的界面元素。</li></ul></li></ol> <p>在这些场景中，<code>forEach</code> 循环提供了一种简洁的方式来处理数组中的每个元素，尤其是当您不需要返回新数组时。这有助于编写更加清晰和可维护的代码。</p> <hr> <h3 id="🔸-16-map"><a href="#🔸-16-map" class="header-anchor">#</a> 🔸 16. <code>map()</code></h3> <h4 id="功能-3"><a href="#功能-3" class="header-anchor">#</a> 功能：</h4> <ul><li><p>數組原型是一個函數,對數組遍歷<strong>不破壞原數組</strong>, 返回一個新數組, <strong>按照原是數組元素順序依次執行給定的函數</strong>, 並將每一次函數執行的結果<strong>作為新數組的元素返回</strong></p></li> <li><p><code>map</code> 方法会遍历数组中的每个元素，并使用回调函数处理每个元素，最终返回一个新数组。</p></li> <li><p>參數: <code>map</code> 方法的回调函数接受三个参数：</p> <ul><li><code>element</code>:就是当前正在遍历的元素</li> <li><code>index</code>, 就是当前正在遍历的元素的索引</li> <li><code>array</code>，就是正在遍历的数组, 調用了 map()的數組本身</li></ul></li> <li><p>語法:</p> <ul><li><code>arr.map(callback(currentValue[, index[, array]])[, thisArg])</code></li> <li><code>arr.map(callback(currentValue[, index[, array]])</code> <ul><li><code>thisArg</code> 可选参数。执行 <code>callback</code> 函数时使用的 <code>this</code> 值。</li></ul></li></ul></li></ul> <h4 id="示例-3"><a href="#示例-3" class="header-anchor">#</a> 示例：</h4> <ol><li>将数组中的每个对象都添加一个新属性，并设置为相同的值。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Bob&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Charlie&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> updatedUsers <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>user<span class="token punctuation">,</span>
  <span class="token literal-property property">isActive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>updatedUsers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [{ name: &quot;Alice&quot;, isActive: true }, { name: &quot;Bob&quot;, isActive: true }, { name: &quot;Charlie&quot;, isActive: true }]</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> numbers<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> doubled<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">number</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>從數組對象裡提取特定屬性</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> users<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">21</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Charlie&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">22</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> names<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>user<span class="token operator">:</span> User<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>将字符串数组转换为对象数组</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> fruits<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;banana&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cherry&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">FruitObject</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fruitObjects<span class="token operator">:</span> FruitObject<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>fruit<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> fruit<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fruitObjects<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [{ name: &quot;apple&quot; }, { name: &quot;banana&quot; }, { name: &quot;cherry&quot; }]</span>
</code></pre></div><ol start="4"><li>对象数组中的数字属性进行转换</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> products<span class="token operator">:</span> Product<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Book'</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">15</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Pen'</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Pencil'</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> discountedProducts<span class="token operator">:</span> Product<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> products<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token operator">:</span> Product<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token operator">...</span>product<span class="token punctuation">,</span>
price<span class="token operator">:</span> product<span class="token punctuation">.</span>price \<span class="token operator">*</span> <span class="token number">0.9</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="使用場景-3"><a href="#使用場景-3" class="header-anchor">#</a> 使用場景:</h4> <p>在 TypeScript 结合 React 开发的外卖应用（Web Restaurant App）中，使用<code>.map</code>方法来渲染列表是非常常见的。这里我将提供一些示例，展示如何在 TypeScript 环境下使用<code>.map</code>方法处理和渲染餐厅应用中的数据。</p> <ol><li>渲染菜单列表: 假设你有一个菜单项的数组，你想渲染这些菜单项到页面上。</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">MenuItem</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  description<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> menuItems<span class="token operator">:</span> MenuItem<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Burger&quot;</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">5.99</span><span class="token punctuation">,</span> description<span class="token operator">:</span> <span class="token string">&quot;A classic burger&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Pizza&quot;</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">7.99</span><span class="token punctuation">,</span> description<span class="token operator">:</span> <span class="token string">&quot;Cheesy pizza&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// more menu items...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> MenuList<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>menuItems<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token operator">-</span> $<span class="token punctuation">{</span>item<span class="token punctuation">.</span>price<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>description<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>订单详情: 在订单详情页，你可能需要列出用户所选的菜品及其价格。</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">OrderItem</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  quantity<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> orderItems<span class="token operator">:</span> OrderItem<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 假设这些数据是用户选择的菜品</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> OrderDetails<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>orderItems<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span> x <span class="token punctuation">{</span>item<span class="token punctuation">.</span>quantity<span class="token punctuation">}</span> <span class="token operator">-</span> $<span class="token punctuation">{</span>item<span class="token punctuation">.</span>quantity <span class="token operator">*</span> item<span class="token punctuation">.</span>price<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>评分和评论, 显示用户对菜品的评分和评论。</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Review</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  user<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  rating<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  comment<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> reviews<span class="token operator">:</span> Review<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 用户评论数据</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ReviewsList<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>reviews<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>review<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>review<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span><span class="token punctuation">{</span>review<span class="token punctuation">.</span>user<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Rating<span class="token operator">:</span> <span class="token punctuation">{</span>review<span class="token punctuation">.</span>rating<span class="token punctuation">}</span> <span class="token operator">/</span> <span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>review<span class="token punctuation">.</span>comment<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>如果你需要同时处理多个异步操作并等待它们全部完成，你可以使用 <code>Promise.all</code> 结合 <code>map</code> 方法，而不是 <code>forEach</code>。当您需要同时处理多个异步操作并等待它们全部完成时，可以使用 <code>Promise.all</code> 结合 <code>map</code> 方法。这种方法特别适用于需要并行执行多个异步请求并等待所有请求完成的情况。</li></ol> <p>示例：并行获取多个资源: 假设您有一个 URL 数组，您需要从每个 URL 获取数据。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> urls<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;https://api.example.com/data1&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;https://api.example.com/data2&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;https://api.example.com/data3&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 更多URLs...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 定义一个异步函数来获取每个URL的数据</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用Promise.all和map来并行获取所有数据</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getAllData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> allData <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>urls<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fetchData</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allData<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印所有获取到的数据</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Error fetching data:&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">getAllData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在这个示例中，<code>urls.map(url =&gt; fetchData(url))</code> 会为每个 URL 创建一个 fetch 请求的 Promise。然后，<code>Promise.all</code> 接收这个 Promise 数组，并等待所有的 fetch 请求都完成。一旦所有请求完成，<code>allData</code> 变量将包含所有 URL 返回的数据。如果任何一个请求失败，<code>catch</code> 块将捕获错误。</p> <p>注意事项:</p> <ul><li>当使用 <code>Promise.all</code> 时，如果任何一个 Promise 失败，整个 <code>Promise.all</code> 调用会立即失败。这意味着如果您有多个请求，一个请求失败，其他成功的请求的结果也会被丢弃。如果您需要不同的行为（例如，处理每个请求的单独成功或失败），您可能需要考虑使用 <code>Promise.allSettled</code> 或单独处理每个 Promise 的错误。</li> <li>使用 <code>Promise.all</code> 可以显著提高性能，因为它允许异步操作并行执行，而不是按顺序一个接一个执行。
当然可以。在 TypeScript 和 React 结合使用的场景中，我们可以遇到更复杂的使用 <code>map</code> 方法的例子，特别是在处理嵌套数据结构或进行更高级的数据转换时。以下是一些复杂的使用场景示例：</li></ul> <ol start="5"><li>渲染嵌套评论</li></ol> <p>假设你有一个嵌套评论的数据结构，你需要递归地渲染每个评论及其子评论。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Comment</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  user<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  replies<span class="token operator">:</span> Comment<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> comments<span class="token operator">:</span> Comment<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 假设的评论数据，每个评论可能有回复（也是Comment类型）</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> renderComments <span class="token operator">=</span> <span class="token punctuation">(</span>comments<span class="token operator">:</span> Comment<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>Element<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> comments<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>comment<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>comment<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span><span class="token punctuation">{</span>comment<span class="token punctuation">.</span>user<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>comment<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>comment<span class="token punctuation">.</span>replies <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;replies&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token function">renderComments</span><span class="token punctuation">(</span>comment<span class="token punctuation">.</span>replies<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> CommentsList<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token function">renderComments</span><span class="token punctuation">(</span>comments<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><ol start="6"><li>动态生成表格列</li></ol> <p>在一个数据驱动的应用中，你可能需要根据数据对象的属性动态生成表格列。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  stock<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> products<span class="token operator">:</span> Product<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 产品数据</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ProductTable<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>table<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>thead<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>products<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>th key<span class="token operator">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>key<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>tbody<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>products<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>tr key<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>td key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="7"><li>使用 <code>map</code> 处理 TypeScript 枚举</li></ol> <p>当你有一个 TypeScript 枚举，并希望基于枚举的值生成一组元素时。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">enum</span> OrderStatus <span class="token punctuation">{</span>
  Pending <span class="token operator">=</span> <span class="token string">&quot;pending&quot;</span><span class="token punctuation">,</span>
  InProgress <span class="token operator">=</span> <span class="token string">&quot;in_progress&quot;</span><span class="token punctuation">,</span>
  Completed <span class="token operator">=</span> <span class="token string">&quot;completed&quot;</span><span class="token punctuation">,</span>
  Cancelled <span class="token operator">=</span> <span class="token string">&quot;cancelled&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> StatusSelector<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>select<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>OrderStatus<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>status<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>status<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>status<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="8"><li>使用 <code>Promise.all</code> 与类型保护</li></ol> <p>在处理多个异步请求时，你可能还需要进行类型保护，以确保每个响应都符合预期的类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ApiResponse</span> <span class="token operator">=</span> DataResponse <span class="token operator">|</span> ErrorResponse<span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">DataResponse</span> <span class="token punctuation">{</span>
  status<span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">;</span>
  data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ErrorResponse</span> <span class="token punctuation">{</span>
  status<span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">;</span>
  message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> fetchData <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ApiResponse<span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">,</span> data <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> message<span class="token operator">:</span> error<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getAllData</span><span class="token punctuation">(</span>urls<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> responses <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>urls<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>fetchData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  responses<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Data:&quot;</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Error:&quot;</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在这个示例中，<code>ApiResponse</code> 类型是一个联合类型，包括 <code>DataResponse</code> 和 <code>ErrorResponse</code>。当处理 <code>Promise.all</code> 的结果时，使用类型保护来确定每个响应是成功的数据响应还是错误响应。</p> <p>这些例子展示了在更复杂的场景中使用 <code>.map</code> 方法的多样性，尤其是在 TypeScript 环境中处理类型安全和异步操作时。</p> <hr> <h3 id="🔸-17-filter"><a href="#🔸-17-filter" class="header-anchor">#</a> 🔸 17. <code>filter()</code></h3> <h4 id="功能-4"><a href="#功能-4" class="header-anchor">#</a> 功能：</h4> <ul><li><p><code>filter</code> 方法会遍历数组中的每个元素，并使用回调函数处理每个元素，最终返回一个新数组。</p></li> <li><p>在回调函数中，返回值为 <code>true</code> 的元素将会被保留，返回值为 <code>false</code> 的元素将会被过滤掉。</p></li> <li><p><code>filter</code> 方法不会改变原数组。</p></li> <li><p><code>filter</code> 方法的回调函数接受三个参数：</p> <ul><li><code>element</code>:就是当前正在遍历的元素</li> <li><code>index</code>, 就是当前正在遍历的元素的索引</li> <li><code>array</code>，就是正在遍历的数组, 調用了 filter()的數組本身</li> <li><code>thisArg</code> 可选参数。执行 <code>callback</code> 函数时使用的 <code>this</code> 值。</li></ul></li> <li><p>語法:</p> <ul><li><code>arr.filter(callback(currentValue[, index[, array]])[, thisArg])</code></li> <li><code>arr.filter(callback(currentValue[, index[, array]])</code></li></ul></li></ul> <h4 id="示例-4"><a href="#示例-4" class="header-anchor">#</a> 示例：</h4> <p>当然可以。下面是一些使用 <code>filter</code> 方法的 TypeScript 示例，包括处理数组对象，并在某些情况下利用索引。</p> <ol><li>过滤特定条件的对象</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  inStock<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> products<span class="token operator">:</span> Product<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Apple&quot;</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">1.2</span><span class="token punctuation">,</span> inStock<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Banana&quot;</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span> inStock<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Cherry&quot;</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span><span class="token punctuation">,</span> inStock<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 过滤出库存中的产品</span>
<span class="token keyword">const</span> inStockProducts<span class="token operator">:</span> Product<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> products<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>product<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> product<span class="token punctuation">.</span>inStock
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>使用索引过滤</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> data<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 只保留偶数索引的元素</span>
<span class="token keyword">const</span> filteredData<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> index <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>结合对象和索引过滤</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> users<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Carol&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">22</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 过滤出年龄大于25的用户，并且只保留偶数索引的用户</span>
<span class="token keyword">const</span> selectedUsers<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>user<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>age <span class="token operator">&gt;</span> <span class="token number">25</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>移除数组中的重复元素</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> numbers<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> uniqueNumbers<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">===</span> index
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="5"><li>根据多个条件过滤</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  author<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  year<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> books<span class="token operator">:</span> Book<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">&quot;1984&quot;</span><span class="token punctuation">,</span> author<span class="token operator">:</span> <span class="token string">&quot;George Orwell&quot;</span><span class="token punctuation">,</span> year<span class="token operator">:</span> <span class="token number">1949</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token string">&quot;The Great Gatsby&quot;</span><span class="token punctuation">,</span>
    author<span class="token operator">:</span> <span class="token string">&quot;F. Scott Fitzgerald&quot;</span><span class="token punctuation">,</span>
    year<span class="token operator">:</span> <span class="token number">1925</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">&quot;Brave New World&quot;</span><span class="token punctuation">,</span> author<span class="token operator">:</span> <span class="token string">&quot;Aldous Huxley&quot;</span><span class="token punctuation">,</span> year<span class="token operator">:</span> <span class="token number">1932</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 过滤出在1930年之后出版的书籍，并且作者为 &quot;Aldous Huxley&quot;</span>
<span class="token keyword">const</span> filteredBooks<span class="token operator">:</span> Book<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> books<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>book<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> book<span class="token punctuation">.</span>year <span class="token operator">&gt;</span> <span class="token number">1930</span> <span class="token operator">&amp;&amp;</span> book<span class="token punctuation">.</span>author <span class="token operator">===</span> <span class="token string">&quot;Aldous Huxley&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="6"><li><code>map</code> 和<code>filter</code> 鏈式調用,數組對象裡提取特定屬性</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> users<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Bob&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Bob&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Charlie&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newUsers <span class="token operator">=</span> users
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>item<span class="token punctuation">,</span> isMember<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newUsers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [{ id: 1, name: &quot;Alice&quot;, isMember: true }, { id: 2, name: &quot;Bob&quot;, isMember: true }, { id: 3, name: &quot;Charlie&quot;, isMember: true }]</span>
</code></pre></div><h4 id="其他使用場景"><a href="#其他使用場景" class="header-anchor">#</a> 其他使用場景:</h4> <p>在一个复杂的餐厅程序中，我们可以设想几个更复杂的 <code>filter</code> 使用场景，这些场景涉及多条件筛选、嵌套数据结构以及和其他数组方法的结合使用。以下是一些 TypeScript 示例：</p> <ol><li>根据多个条件筛选菜单项</li></ol> <p>假设你的餐厅应用需要根据多个条件（如价格范围、食物类型、客户评分）筛选菜单项。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">MenuItem</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  type<span class="token operator">:</span> <span class="token string">&quot;starter&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;main&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;dessert&quot;</span><span class="token punctuation">;</span>
  price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  averageRating<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> menuItems<span class="token operator">:</span> MenuItem<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 菜单项数据...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> filterCriteria <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">&quot;main&quot;</span><span class="token punctuation">,</span>
  priceRange<span class="token operator">:</span> <span class="token punctuation">{</span> min<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  minRating<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> filteredMenuItems <span class="token operator">=</span> menuItems<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    item<span class="token punctuation">.</span>type <span class="token operator">===</span> filterCriteria<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span>
    item<span class="token punctuation">.</span>price <span class="token operator">&gt;=</span> filterCriteria<span class="token punctuation">.</span>priceRange<span class="token punctuation">.</span>min <span class="token operator">&amp;&amp;</span>
    item<span class="token punctuation">.</span>price <span class="token operator">&lt;=</span> filterCriteria<span class="token punctuation">.</span>priceRange<span class="token punctuation">.</span>max <span class="token operator">&amp;&amp;</span>
    item<span class="token punctuation">.</span>averageRating <span class="token operator">&gt;=</span> filterCriteria<span class="token punctuation">.</span>minRating
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol><li>筛选包含特定配料的菜品及其变体</li></ol> <p>考虑一个复杂的场景，其中菜品可能有多个变体（如不同的调味方式或配料）。你需要找到包含或排除特定配料的所有菜品及其变体。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">MenuItemVariant</span> <span class="token punctuation">{</span>
  variantId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  ingredients<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">MenuItem</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  variants<span class="token operator">:</span> MenuItemVariant<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> menuItems<span class="token operator">:</span> MenuItem<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 菜单项及变体数据...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ingredientFilter <span class="token operator">=</span> <span class="token string">&quot;cheese&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> itemsWithIngredient <span class="token operator">=</span> menuItems<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  item<span class="token punctuation">.</span>variants<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span>variant<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    variant<span class="token punctuation">.</span>ingredients<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ingredientFilter<span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>结合 <code>filter</code> 和 <code>map</code> 筛选并转换数据</li></ol> <p>在某些情况下，你可能需要先筛选出符合条件的数据，然后转换这些数据以用于显示。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> menuItemsWithRatings<span class="token operator">:</span> MenuItem<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 含评分的菜单项数据...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> highRatedDishes <span class="token operator">=</span> menuItemsWithRatings
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>averageRating <span class="token operator">&gt;=</span> <span class="token number">4</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> item<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
    rating<span class="token operator">:</span> item<span class="token punctuation">.</span>averageRating<span class="token punctuation">,</span>
    priceRange<span class="token operator">:</span> item<span class="token punctuation">.</span>price <span class="token operator">&gt;=</span> <span class="token number">20</span> <span class="token operator">?</span> <span class="token string">&quot;High&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Medium&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>复杂订单过滤</li></ol> <p>考虑到餐厅可能需要处理大量的订单数据，你可能需要根据订单的多个属性来筛选它们，如订单状态、金额、下单时间等。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  totalAmount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  status<span class="token operator">:</span> <span class="token string">&quot;new&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;processing&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;delivered&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;cancelled&quot;</span><span class="token punctuation">;</span>
  orderDate<span class="token operator">:</span> Date<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> orders<span class="token operator">:</span> Order<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 订单数据...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> filteredOrders <span class="token operator">=</span> orders<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>order<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    order<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&quot;delivered&quot;</span> <span class="token operator">&amp;&amp;</span>
    order<span class="token punctuation">.</span>totalAmount <span class="token operator">&gt;</span> <span class="token number">50</span> <span class="token operator">&amp;&amp;</span>
    order<span class="token punctuation">.</span>orderDate <span class="token operator">&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&quot;2021-01-01&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="🔸-18-every"><a href="#🔸-18-every" class="header-anchor">#</a> 🔸 18. <code>every()</code></h3> <h4 id="功能-5"><a href="#功能-5" class="header-anchor">#</a> 功能：</h4> <ul><li>检测数组所有元素是否都满足指定条件。</li> <li><code>every</code> 方法会遍历数组中的每个元素，并使用回调函数处理每个元素，最终返回一个布尔值。</li> <li>在回调函数中，如果<strong>所有元素都满足条件</strong>，<code>every</code> 方法将返回 <code>true</code>，否则返回 <code>false</code>。</li></ul> <h4 id="示例-5"><a href="#示例-5" class="header-anchor">#</a> 示例：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">93</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item <span class="token operator">&gt;=</span> <span class="token number">50</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><h4 id="使用場景-4"><a href="#使用場景-4" class="header-anchor">#</a> 使用場景</h4> <p>当您需要检测数组中的所有元素是否满足指定条件时，可以使用 <code>every</code> 方法。以下是一些 TypeScript 示例：</p> <ol><li>检测订单中的所有商品是否都有库存</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">OrderItem</span> <span class="token punctuation">{</span>
  productId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  quantity<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> orderItems<span class="token operator">:</span> OrderItem<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> productId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> quantity<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> productId<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> quantity<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 更多商品...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> allItemsInStock <span class="token operator">=</span> orderItems<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>quantity <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="🔸-19-some"><a href="#🔸-19-some" class="header-anchor">#</a> 🔸 19. <code>some()</code></h3> <h4 id="功能-6"><a href="#功能-6" class="header-anchor">#</a> 功能：</h4> <ul><li>检测数组中是否有元素满足指定条件。</li> <li><code>some</code> 方法会遍历数组中的每个元素，并使用回调函数处理每个元素，最终返回一个布尔值。</li> <li>在回调函数中，<strong>如果有一个元素满足条件</strong>，<code>some</code> 方法将返回 <code>true</code>，否则返回 <code>false</code>。</li></ul> <h4 id="示例-6"><a href="#示例-6" class="header-anchor">#</a> 示例：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">93</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item <span class="token operator">&gt;=</span> <span class="token number">50</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><blockquote><p>和 <code>every</code> 方法类似，<code>some</code> 方法也可以用于检测数组中是否有元素满足指定条件。但是，<code>some</code> 方法只要有一个元素满足条件，就会返回 <code>true</code>，而不是所有元素都满足条件。</p></blockquote> <h3 id="🔸-20-reduce"><a href="#🔸-20-reduce" class="header-anchor">#</a> 🔸 20. <code>reduce()</code></h3> <h4 id="功能-7"><a href="#功能-7" class="header-anchor">#</a> 功能：</h4> <ul><li><p>对数组中的每个元素执行一个由您提供的 <code>reducer</code> 函数(升序执行)，将其结果汇总为单个返回值。</p></li> <li><p><code>reduce</code> 方法對數組中每一個元素按序執行一個指定方法, 每一次允許<code>reducer</code> 會將先前元素的計算結果作為參數傳入, 最後返回一個累積的結果</p></li> <li><p><code>reduce</code> 方法接受两个参数：</p> <ul><li><code>reducer</code> 函数：用于处理数组中的每个元素，并将其结果汇总为单个返回值。</li> <li><code>initialValue</code>：作为第一次调用 <code>reducer</code> 函数时的第一个参数使用的值。第一次回調函數的初始值,如果指定初始值,則會作為第一次調用 callback 函數時的第一個參數使用。如果沒有提供初始值,則將使用數組中的第一個元素。在沒有初始值的空數組上調用 reduce 將報錯。</li></ul></li> <li><p><code>reducer</code> 函数接受四个参数：</p> <ul><li><code>accumulator</code>：累加器累计回调的返回值; 它是上一次调用回调时返回的累积值，或 <code>initialValue</code>。</li> <li><code>currentValue</code>：数组中正在处理的元素。</li> <li><code>currentIndex</code>：数组中正在处理的元素的索引。如果提供了 <code>initialValue</code>，则索引号为 0，否则索引为 1。</li> <li><code>array</code>：调用 <code>reduce</code> 的数组。</li> <li><code>thisArg</code> 可选参数。执行 <code>callback</code> 函数时使用的 <code>this</code> 值。</li></ul></li></ul> <h4 id="示例-7"><a href="#示例-7" class="header-anchor">#</a> 示例：</h4> <ol><li>计算订单总金额: 假设你有一个表示订单中各个商品及其数量的数组，你需要计算订单的总金额。</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">OrderItem</span> <span class="token punctuation">{</span>
  productId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  quantity<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> orderItems<span class="token operator">:</span> OrderItem<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> productId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> quantity<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> productId<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> quantity<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 更多商品...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> totalAmount <span class="token operator">=</span> orderItems<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>total<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> total <span class="token operator">+</span> item<span class="token punctuation">.</span>quantity <span class="token operator">*</span> item<span class="token punctuation">.</span>price<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>将数组转换为对象 使用<code>reduce</code> 方法可以将数组转换为更复杂的数据结构，比如对象。</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> users<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Bob&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 更多用户...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//累加器：reduce 方法的第一个参数是一个回调函数，这个回调函数接收两个参数：当前的累加器（obj）和当前正在处理的数组元素（user）。</span>
<span class="token keyword">const</span> usersById <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">[</span>user<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> user<span class="token punctuation">;</span> <span class="token comment">// *将用户对象添加到以用户ID为键的对象中*</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">;</span>

  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { 1: { id: 1, name: &quot;Alice&quot; }, 2: { id: 2, name: &quot;Bob&quot; } }</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> User <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 以空对象作为初始值</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>usersById<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { 1: { id: 1, name: &quot;Alice&quot; }, 2: { id: 2, name: &quot;Bob&quot; } }</span>
</code></pre></div><blockquote><p>当你看到这种写法 <code>obj[user.id] = user;</code>，它是一种在 JavaScript 和 TypeScript 中常用的方式，用于将数组中的元素映射到一个对象的属性上。具体来说，这种写法是在构造一个以 <code>user.id</code> 作为键（key），<code>user</code> 对象本身作为值（value）的对象。</p></blockquote> <blockquote><p>在这个表达式中：</p></blockquote> <blockquote><ul><li><code>obj</code> 是一个对象，通常是一个空对象 <code>{}</code>，它在 <code>reduce</code> 函数的迭代过程中不断被更新。</li> <li><code>user</code> 是当前正在迭代的数组元素。</li> <li><code>user.id</code> 是 <code>user</code> 对象的一个属性，这里用作新对象的键。</li> <li><code>obj[user.id]</code> 表示在 <code>obj</code> 对象中创建或更新一个以 <code>user.id</code> 的值为键的属性。</li> <li><code>obj[user.id] = user;</code> 表示将当前的 <code>user</code> 对象赋值给这个键。</li></ul></blockquote> <ol start="3"><li>分类汇总数据: 对数组中的项目进行分类，并计算每个类别中的项目数量。</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  category<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> products<span class="token operator">:</span> Product<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> category<span class="token operator">:</span> <span class="token string">&quot;Electronics&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> category<span class="token operator">:</span> <span class="token string">&quot;Books&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 更多产品...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> categoryCount <span class="token operator">=</span> products<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> product<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">[</span>product<span class="token punctuation">.</span>category<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>count<span class="token punctuation">[</span>product<span class="token punctuation">.</span>category<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>{} as { [key: string]: number });</code> 是一種 type assertion, 用來告訴編譯器, 這個空對象的類型是 <code>{ [key: string]: number }</code>。 <code>{ [key: string]: number }:</code>这是一个索引签名类型。它描述了一个对象，这个对象可以拥有任意数量的属性，但所有属性的键（key）都是字符串类型，而对应的值（value）都是数字类型。</p></blockquote> <blockquote><p>[key: string]: 表示对象的键是字符串类型。key 在这里只是一个占位符，你可以使用任何名称。
number: 表示属性值的类型必须是数字。</p></blockquote> <ol start="4"><li>创建值的累积数组: 创建一个新数组，其中每个元素是原始数组中对应元素及其之前所有元素的累积和。</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> cumulativeSum <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>acc<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    acc<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value <span class="token operator">+</span> acc<span class="token punctuation">[</span>acc<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    acc<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="使用場景-5"><a href="#使用場景-5" class="header-anchor">#</a> 使用場景:</h4> <p>在餐厅应用程序（Restaurant App）的开发中，<code>reduce</code> 方法可以在许多场景中发挥重要作用，尤其是在处理数据汇总、统计分析以及复杂的数组转换时。以下是一些针对餐厅应用的 TypeScript 示例，展示了 <code>reduce</code> 方法的不同用途：</p> <ol><li>统计不同类型菜品的数量</li></ol> <p>假设你的餐厅应用需要对菜单中不同类型的菜品进行统计。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">MenuItem</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  type<span class="token operator">:</span> <span class="token string">&quot;starter&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;main&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;dessert&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> menuItems<span class="token operator">:</span> MenuItem<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 菜单数据...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> itemCountByType <span class="token operator">=</span> menuItems<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">[</span>item<span class="token punctuation">.</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>count<span class="token punctuation">[</span>item<span class="token punctuation">.</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>计算每日总销售额</li></ol> <p>计算一天内所有订单的总销售额。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  totalAmount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  date<span class="token operator">:</span> Date<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> orders<span class="token operator">:</span> Order<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 当日订单数据...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> totalSales <span class="token operator">=</span> orders<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>total<span class="token punctuation">,</span> order<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> total <span class="token operator">+</span> order<span class="token punctuation">.</span>totalAmount<span class="token punctuation">,</span>
  <span class="token number">0</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>汇总顾客反馈</li></ol> <p>将所有顾客的评论汇总成一个字符串。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Review</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  comment<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> reviews<span class="token operator">:</span> Review<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 顾客评论数据...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> allComments <span class="token operator">=</span> reviews<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>comments<span class="token punctuation">,</span> review<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> comments <span class="token operator">+</span> review<span class="token punctuation">.</span>comment <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>创建菜品成分列表</li></ol> <p>假设你需要从所有菜品中创建一个包含所有独特成分的列表。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Dish</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  ingredients<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> dishes<span class="token operator">:</span> Dish<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 菜品数据...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> allIngredients <span class="token operator">=</span> dishes
  <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>ingredients<span class="token punctuation">,</span> dish<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ingredients<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>dish<span class="token punctuation">.</span>ingredients<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> self<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> self<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">===</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 移除重复项</span>
</code></pre></div><ol start="5"><li>分类订单并计算每类的总金额</li></ol> <p>假设你需要按顾客类型（比如会员和非会员）分类订单，并计算每一类的总金额。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">CustomerOrder</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  customerId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  totalAmount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  isMember<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> customerOrders<span class="token operator">:</span> CustomerOrder<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 顾客订单数据...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> totalAmountByCustomerType <span class="token operator">=</span> customerOrders<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>totals<span class="token punctuation">,</span> order<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> order<span class="token punctuation">.</span>isMember <span class="token operator">?</span> <span class="token string">&quot;members&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;nonMembers&quot;</span><span class="token punctuation">;</span>
  totals<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>totals<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> order<span class="token punctuation">.</span>totalAmount<span class="token punctuation">;</span>
  <span class="token keyword">return</span> totals<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token punctuation">{</span> members<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> nonMembers<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><hr> <h3 id="🔸-21-reduceright"><a href="#🔸-21-reduceright" class="header-anchor">#</a> 🔸 21. <code>reduceRight()</code></h3> <ul><li>功能：类似于<code>reduce()</code>，但从右到左执行。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 示例与`reduce()`类似，仅改变迭代方向</span>
</code></pre></div></li></ul> <h3 id="🔸-22-includes"><a href="#🔸-22-includes" class="header-anchor">#</a> 🔸 22. <code>includes()</code></h3> <h4 id="功能-8"><a href="#功能-8" class="header-anchor">#</a> 功能：</h4> <ul><li><p>判断数组是否包含指定的值, 返回布尔值。</p></li> <li><p>只能檢測基本類型的值, 不能檢測引用類型的值</p></li> <li><p><code>includes</code> 方法接受两个参数：</p> <ul><li><code>searchElement</code>：要查找的元素。</li> <li><code>fromIndex</code>：可选参数。开始查找的位置。如果省略，则从数组的第一个元素（索引位置 0）开始查找。如果该值为负数，则按升序从 <code>array.length + fromIndex</code> 的索引开始搜索。如果 <code>fromIndex</code> 大于或等于数组的长度，则 <code>includes</code> 不会查找数组，返回 <code>false</code>。</li></ul></li></ul> <h4 id="示例-8"><a href="#示例-8" class="header-anchor">#</a> 示例：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> site <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;facebook&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;google&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;youtube&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>site<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;youtube&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>site<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;yahoo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="_23-🔸-from"><a href="#_23-🔸-from" class="header-anchor">#</a> 23.🔸 <code>from()</code></h3> <ul><li>功能：从类数组或可迭代对象创建一个新数组。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> all <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">&quot;张飞&quot;</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">&quot;28&quot;</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span>
  <span class="token number">3</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;率土&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;鸿图&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;三战&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> list <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>all<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="_24-🔸-find"><a href="#_24-🔸-find" class="header-anchor">#</a> 24. 🔸 <code>find()</code></h3> <ul><li>功能：返回数组中满足提供的测试函数的第一个元素的值。否则返回<code>undefined</code>。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> res <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">60</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 66</span>
</code></pre></div></li></ul> <h3 id="_25-🔸-findindex"><a href="#_25-🔸-findindex" class="header-anchor">#</a> 25. 🔸 <code>findIndex()</code></h3> <ul><li>功能：返回数组中满足提供的测试函数的第一个元素的索引。否则返回-1。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> index <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">60</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div></li></ul> <h3 id="_26-🔸-fill"><a href="#_26-🔸-fill" class="header-anchor">#</a> 26. 🔸 <code>fill()</code></h3> <ul><li>功能：用一个固定值填充数组中从起始索引到终止索引内的全部元素。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">&quot;填充&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;a&quot;, &quot;填充&quot;, &quot;c&quot;]</span>
</code></pre></div></li></ul> <h3 id="_27-🔸-flat"><a href="#_27-🔸-flat" class="header-anchor">#</a> 27. 🔸 <code>flat()</code></h3> <ul><li><p>功能：创建一个新数组，其中所有子数组元素递归地连接到指定深度。</p></li> <li><p>示例：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;拉平一次&quot;</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, [5]]</span>

<span class="token keyword">var</span> arr2 <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拉平两次</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;拉平两次&quot;</span><span class="token punctuation">,</span> arr2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5]</span>
</code></pre></div></li></ul> <h3 id="_28-🔸-flatmap"><a href="#_28-🔸-flatmap" class="header-anchor">#</a> 28. 🔸 <code>flatMap()</code></h3> <ul><li>功能：首先使用映射函数映射每个元素，然后将结果压缩成一个新数组。</li> <li>示例：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> newArr <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>item<span class="token punctuation">,</span> index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;flatMap方法:&quot;</span><span class="token punctuation">,</span> newArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 结果: [[55, 0], [66, 1], [77, 2], [88, 3], [99, 4], [100, 5]]</span>
</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/javascript/" class="prev router-link-active">
        Javascript guide
      </a></span> <span class="next"><a href="/guide/javascript/js-study-notes.html">
        ⚪️ Javascript -articles の研究例をいくつか
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.204ed3d4.js" defer></script><script src="/assets/js/2.a44fb3b0.js" defer></script><script src="/assets/js/1.8d37d391.js" defer></script><script src="/assets/js/29.844af673.js" defer></script>
  </body>
</html>
