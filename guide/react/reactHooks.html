<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>âšªï¸ React Hooks ã‚’åŸºç¤ã‹ã‚‰ç†è§£ã™ã‚‹ | â˜» itsyuimorii.space</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content=" ">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.204ed3d4.js" as="script"><link rel="preload" href="/assets/js/2.a44fb3b0.js" as="script"><link rel="preload" href="/assets/js/1.8d37d391.js" as="script"><link rel="preload" href="/assets/js/37.9bd0a687.js" as="script"><link rel="prefetch" href="/assets/js/10.d8df69df.js"><link rel="prefetch" href="/assets/js/11.2a97faa3.js"><link rel="prefetch" href="/assets/js/12.5fd72f78.js"><link rel="prefetch" href="/assets/js/13.767d92f0.js"><link rel="prefetch" href="/assets/js/14.09112e04.js"><link rel="prefetch" href="/assets/js/15.2d87bde7.js"><link rel="prefetch" href="/assets/js/16.d6bec5e2.js"><link rel="prefetch" href="/assets/js/17.3dbcb51f.js"><link rel="prefetch" href="/assets/js/18.4c170722.js"><link rel="prefetch" href="/assets/js/19.1b72b4a4.js"><link rel="prefetch" href="/assets/js/20.9741499c.js"><link rel="prefetch" href="/assets/js/21.7f8f7869.js"><link rel="prefetch" href="/assets/js/22.3f20ce36.js"><link rel="prefetch" href="/assets/js/23.7c0322e8.js"><link rel="prefetch" href="/assets/js/24.fa4b7294.js"><link rel="prefetch" href="/assets/js/25.4b75e33e.js"><link rel="prefetch" href="/assets/js/26.6ccb7807.js"><link rel="prefetch" href="/assets/js/27.6c078df5.js"><link rel="prefetch" href="/assets/js/28.520f43fd.js"><link rel="prefetch" href="/assets/js/29.844af673.js"><link rel="prefetch" href="/assets/js/3.f8c28e7e.js"><link rel="prefetch" href="/assets/js/30.b352e55d.js"><link rel="prefetch" href="/assets/js/31.c2296a43.js"><link rel="prefetch" href="/assets/js/32.f990ea1b.js"><link rel="prefetch" href="/assets/js/33.e2f64269.js"><link rel="prefetch" href="/assets/js/34.b9fe4fba.js"><link rel="prefetch" href="/assets/js/35.6015d88a.js"><link rel="prefetch" href="/assets/js/36.2ee99065.js"><link rel="prefetch" href="/assets/js/38.04db86c7.js"><link rel="prefetch" href="/assets/js/39.1fe91b86.js"><link rel="prefetch" href="/assets/js/4.9eb8282d.js"><link rel="prefetch" href="/assets/js/40.43f0acc3.js"><link rel="prefetch" href="/assets/js/41.7bcb3391.js"><link rel="prefetch" href="/assets/js/42.d64e546e.js"><link rel="prefetch" href="/assets/js/43.a2cbbfc3.js"><link rel="prefetch" href="/assets/js/44.0492f992.js"><link rel="prefetch" href="/assets/js/45.af66bbe7.js"><link rel="prefetch" href="/assets/js/46.c1c9a53c.js"><link rel="prefetch" href="/assets/js/47.7a2bd268.js"><link rel="prefetch" href="/assets/js/48.0376d3a5.js"><link rel="prefetch" href="/assets/js/49.60535624.js"><link rel="prefetch" href="/assets/js/5.4ceb5601.js"><link rel="prefetch" href="/assets/js/50.88e721ab.js"><link rel="prefetch" href="/assets/js/51.a1a8ca8d.js"><link rel="prefetch" href="/assets/js/52.19d2519d.js"><link rel="prefetch" href="/assets/js/53.891befed.js"><link rel="prefetch" href="/assets/js/54.b3d8b254.js"><link rel="prefetch" href="/assets/js/55.a4b8b234.js"><link rel="prefetch" href="/assets/js/56.710acef5.js"><link rel="prefetch" href="/assets/js/6.cb88f024.js"><link rel="prefetch" href="/assets/js/7.0f51d652.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.8ee43d73.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">â˜» itsyuimorii.space</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="âœ¸ãƒãƒ¼ãƒˆ" class="dropdown-title"><span class="title">âœ¸ãƒãƒ¼ãƒˆ</span> <span class="arrow down"></span></button> <button type="button" aria-label="âœ¸ãƒãƒ¼ãƒˆ" class="mobile-dropdown-title"><span class="title">âœ¸ãƒãƒ¼ãƒˆ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          ã€Œå­¦ç¿’ãƒãƒ¼ãƒˆã€
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/react/" class="nav-link router-link-active">
  â–«ï¸ React.js
</a></li><li class="dropdown-subitem"><a href="/guide/typescript/" class="nav-link">
  â–«ï¸ Typescript
</a></li><li class="dropdown-subitem"><a href="/guide/javascript/" class="nav-link">
  â–«ï¸ Javascript
</a></li><li class="dropdown-subitem"><a href="/guide/nextjs/" class="nav-link">
  â–«ï¸ Next.js
</a></li></ul></li><li class="dropdown-item"><h4>
          ã€Œãƒ¡ãƒ¢å¸³ã€
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/memo/" class="nav-link">
  â–«ï¸ memoãƒ¡ãƒ¢
</a></li><li class="dropdown-subitem"><a href="/practice/" class="nav-link">
  â–«ï¸ ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="âœ¸ã™ã¹ã¦ã‚’è¨˜éŒ²ã™ã‚‹" class="dropdown-title"><span class="title">âœ¸ã™ã¹ã¦ã‚’è¨˜éŒ²ã™ã‚‹</span> <span class="arrow down"></span></button> <button type="button" aria-label="âœ¸ã™ã¹ã¦ã‚’è¨˜éŒ²ã™ã‚‹" class="mobile-dropdown-title"><span class="title">âœ¸ã™ã¹ã¦ã‚’è¨˜éŒ²ã™ã‚‹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          ãƒ©ã‚¤ãƒ•
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/life/reading/" class="nav-link">
  èª­æ›¸ãƒ¡ãƒ¢
</a></li><li class="dropdown-subitem"><a href="/life/moment/" class="nav-link">
  ãƒ¢ãƒ¼ãƒ¡ãƒ³ãƒˆ
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/itsyuimorii" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="âœ¸ãƒãƒ¼ãƒˆ" class="dropdown-title"><span class="title">âœ¸ãƒãƒ¼ãƒˆ</span> <span class="arrow down"></span></button> <button type="button" aria-label="âœ¸ãƒãƒ¼ãƒˆ" class="mobile-dropdown-title"><span class="title">âœ¸ãƒãƒ¼ãƒˆ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          ã€Œå­¦ç¿’ãƒãƒ¼ãƒˆã€
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/react/" class="nav-link router-link-active">
  â–«ï¸ React.js
</a></li><li class="dropdown-subitem"><a href="/guide/typescript/" class="nav-link">
  â–«ï¸ Typescript
</a></li><li class="dropdown-subitem"><a href="/guide/javascript/" class="nav-link">
  â–«ï¸ Javascript
</a></li><li class="dropdown-subitem"><a href="/guide/nextjs/" class="nav-link">
  â–«ï¸ Next.js
</a></li></ul></li><li class="dropdown-item"><h4>
          ã€Œãƒ¡ãƒ¢å¸³ã€
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/memo/" class="nav-link">
  â–«ï¸ memoãƒ¡ãƒ¢
</a></li><li class="dropdown-subitem"><a href="/practice/" class="nav-link">
  â–«ï¸ ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="âœ¸ã™ã¹ã¦ã‚’è¨˜éŒ²ã™ã‚‹" class="dropdown-title"><span class="title">âœ¸ã™ã¹ã¦ã‚’è¨˜éŒ²ã™ã‚‹</span> <span class="arrow down"></span></button> <button type="button" aria-label="âœ¸ã™ã¹ã¦ã‚’è¨˜éŒ²ã™ã‚‹" class="mobile-dropdown-title"><span class="title">âœ¸ã™ã¹ã¦ã‚’è¨˜éŒ²ã™ã‚‹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          ãƒ©ã‚¤ãƒ•
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/life/reading/" class="nav-link">
  èª­æ›¸ãƒ¡ãƒ¢
</a></li><li class="dropdown-subitem"><a href="/life/moment/" class="nav-link">
  ãƒ¢ãƒ¼ãƒ¡ãƒ³ãƒˆ
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/itsyuimorii" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/guide/react/" aria-current="page" class="sidebar-link">React</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/react/#references" class="sidebar-link">References</a></li></ul></li><li><a href="/guide/react/reactBasics.html" class="sidebar-link">âšªï¸React ã‚’åŸºç¤ã‹ã‚‰ç†è§£ã™ã‚‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/react/reactBasics.html#ğŸ”¶-react-api-ã¨ã¯" class="sidebar-link">ğŸ”¶ React API ã¨ã¯</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactBasics.html#ğŸ”¶-react-api-ã®ç¨®é¡" class="sidebar-link">ğŸ”¶ React API ã®ç¨®é¡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/react/reactBasics.html#â–«ï¸-react-createelement" class="sidebar-link">â–«ï¸ React.createElement</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactBasics.html#â–«ï¸reactdom-createroot" class="sidebar-link">â–«ï¸ReactDOM.createRoot</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactBasics.html#â–«ï¸reactdom-render" class="sidebar-link">â–«ï¸ReactDOM.render</a></li></ul></li></ul></li><li><a href="/guide/react/reactHooks.html" aria-current="page" class="active sidebar-link">âšªï¸ React Hooks ã‚’åŸºç¤ã‹ã‚‰ç†è§£ã™ã‚‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#ğŸ”·-usestate-ã¨ã¯" class="sidebar-link">ğŸ”· useState ã¨ã¯</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#â–«ï¸-usestate-ã®æ³¨æ„ç‚¹" class="sidebar-link">â–«ï¸ useState ã®æ³¨æ„ç‚¹</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#ğŸ”¶-usereducer-ã¨ã¯" class="sidebar-link">ğŸ”¶ useReducer ã¨ã¯</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#â–«ï¸-usereducer-ã®æ³¨æ„ç‚¹" class="sidebar-link">â–«ï¸ useReducer ã®æ³¨æ„ç‚¹</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#ğŸ”·-usecontext-ã¨ã¯" class="sidebar-link">ğŸ”· useContext ã¨ã¯</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#ğŸ”·-useeffect-ã¨ã¯" class="sidebar-link">ğŸ”· useEffect ã¨ã¯</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#â–«ï¸-å‰¯ä½œç”¨ã‚’å®Ÿè¡Œã€åˆ¶å¾¡ã™ã‚‹ãŸã‚ã«-useeffect-ã‚’åˆ©ç”¨ã™ã‚‹" class="sidebar-link">â–«ï¸ å‰¯ä½œç”¨ã‚’å®Ÿè¡Œã€åˆ¶å¾¡ã™ã‚‹ãŸã‚ã« useEffect ã‚’åˆ©ç”¨ã™ã‚‹</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#â–«ï¸-åŸ·è¡Œæ™‚æ©Ÿ" class="sidebar-link">â–«ï¸ åŸ·è¡Œæ™‚æ©Ÿ</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#â–«ï¸-useeffect-ã®ä½¿ã„æ–¹" class="sidebar-link">â–«ï¸ useEffect ã®ä½¿ã„æ–¹</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#â–«ï¸-useeffect-ä¾è³´é …" class="sidebar-link">â–«ï¸ useEffect ä¾è³´é …</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#ğŸ”·-useref-ã¨ã¯" class="sidebar-link">ğŸ”· useRef ã¨ã¯</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#ğŸ”·-usecallback-ã¨ã¯" class="sidebar-link">ğŸ”· useCallback ã¨ã¯</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#ğŸ”º-example" class="sidebar-link">ğŸ”º Example</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#ğŸ”·-usememo-ã¨ã¯" class="sidebar-link">ğŸ”· useMemo ã¨ã¯</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#ğŸ”¶-hooks-compare" class="sidebar-link">ğŸ”¶ Hooks compare</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/react/reactHooks.html#â–«ï¸-usecallback-vs-usememo" class="sidebar-link">â–«ï¸ useCallback vs useMemo</a></li></ul></li></ul></li><li><a href="/guide/react/reactRouter.html" class="sidebar-link">âšªï¸ React Router ã‚’åŸºç¤ã‹ã‚‰ç†è§£ã™ã‚‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/react/reactRouter.html#ğŸ”¶-basic-purpose" class="sidebar-link">ğŸ”¶ Basic Purpose</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactRouter.html#ğŸ”¶-æ§˜ã€…ãªã‚·ãƒ¼ãƒ³" class="sidebar-link">ğŸ”¶ æ§˜ã€…ãªã‚·ãƒ¼ãƒ³</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/react/reactRouter.html#â–«ï¸-takeaway-01-ç†è§£åŒ¹é…å¤±æ•—çš„è™•ç†-å°è±¡userouteerror-å’Œ-errorelement" class="sidebar-link">â–«ï¸ Takeaway 01: ç†è§£åŒ¹é…å¤±æ•—çš„è™•ç†: å°è±¡useRouteError() å’Œ errorElement</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactRouter.html#â–«ï¸-takeaway-02-ç†è§£-nested-routesçš„æ¦‚å¿µ" class="sidebar-link">â–«ï¸ Takeaway 02: ç†è§£ nested-routesçš„æ¦‚å¿µ</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactRouter.html#â–«ï¸-takeaway-03-ğŸ‘‰-å°†ä¾§è¾¹æ æ›´æ”¹-a-href-ä¸º-link-to" class="sidebar-link">â–«ï¸ Takeaway 03: ğŸ‘‰ å°†ä¾§è¾¹æ æ›´æ”¹&lt;a href&gt;ä¸º&lt;Link to&gt;</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/react/reactRouter.html#ğŸ”¶-loader-and-action" class="sidebar-link">ğŸ”¶ loader and action</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/react/reactRouter.html#â–«ï¸-takeaway-01-å‚³çµ±å¼-form-è¡¨å–®çš„æäº¤" class="sidebar-link">â–«ï¸ Takeaway 01: å‚³çµ±å¼ form è¡¨å–®çš„æäº¤</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactRouter.html#â–«ï¸-takeaway-02-ç†è§£-loader-and-actionÃŸ" class="sidebar-link">â–«ï¸ Takeaway 02: ç†è§£ loader and actionÃŸ</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/react/reactRouter.html#ğŸ”¶-url-params-in-loader" class="sidebar-link">ğŸ”¶ URL params in Loader</a></li><li class="sidebar-sub-header"><a href="/guide/react/reactRouter.html#ğŸ”¶-updating-data" class="sidebar-link">ğŸ”¶ Updating data</a></li></ul></li><li><a href="/guide/react/reactRedux.html" class="sidebar-link">React Redux ã‚’åŸºç¤ã‹ã‚‰ç†è§£ã™ã‚‹</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="âšªï¸-react-hooks-ã‚’åŸºç¤ã‹ã‚‰ç†è§£ã™ã‚‹"><a href="#âšªï¸-react-hooks-ã‚’åŸºç¤ã‹ã‚‰ç†è§£ã™ã‚‹" class="header-anchor">#</a> âšªï¸ React Hooks ã‚’åŸºç¤ã‹ã‚‰ç†è§£ã™ã‚‹</h1> <h2 id="ğŸ”·-usestate-ã¨ã¯"><a href="#ğŸ”·-usestate-ã¨ã¯" class="header-anchor">#</a> ğŸ”· useState ã¨ã¯</h2> <p>useState()ã¯ã€é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ state ã‚’ç®¡ç†ï¼ˆstate ã®ä¿æŒã¨æ›´æ–°ï¼‰ã™ã‚‹ãŸã‚ã® React ãƒ•ãƒƒã‚¯ã§ã‚ã‚Šã€æœ€ã‚‚åˆ©ç”¨ã•ã‚Œã‚‹ãƒ•ãƒƒã‚¯ã§ã™ã€‚</p> <p>state ã¨ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå†…éƒ¨ã§ä¿æŒã™ã‚‹ã€ŒçŠ¶æ…‹ã€ã®ã“ã¨ã§ã€ç”»é¢ä¸Šã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ç­‰ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒä¿æŒã—ã¦ã„ã‚‹çŠ¶æ…‹ã‚’æŒ‡ã—ã¦ã„ã¾ã™ã€‚state ã¯ props ã¨é•ã„å¾Œã‹ã‚‰å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™</p> <h3 id="â–«ï¸-usestate-ã®æ³¨æ„ç‚¹"><a href="#â–«ï¸-usestate-ã®æ³¨æ„ç‚¹" class="header-anchor">#</a> â–«ï¸ useState ã®æ³¨æ„ç‚¹</h3> <p><strong>1. Accepts a single parameter, the initial state value, which can be any data type:</strong></p> <blockquote><p>å”¯ä¸€ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€ãã‚ŒãŒçŠ¶æ…‹ã®åˆæœŸå€¤ã§ã‚ã‚Šã€åˆæœŸå€¤ã¯ä»»æ„ã®ãƒ‡ãƒ¼ã‚¿å‹ã§ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Example with a string initial state</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> setText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Example with a number initial state</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Example with an object initial state</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>person<span class="token punctuation">,</span> setPerson<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">25</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;Bye&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Change Text<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>2. Returns an array containing the state value and a method to update the state:</strong></p> <blockquote><p>æˆ»ã‚Šå€¤ã¯ã€çŠ¶æ…‹å€¤ã¨çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒå«ã¾ã‚ŒãŸé…åˆ—ã§ã€ãƒ¡ã‚½ãƒƒãƒ‰åã¯ &quot;set&quot; ã§å§‹ã¾ã‚Šã€å¾Œã«çŠ¶æ…‹åãŒç¶šãã¾ã™ã€‚</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Example using a boolean state</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>isActive<span class="token punctuation">,</span> setIsActive<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>3. <code>useState()</code> can be used multiple times to store multiple states:</strong></p> <blockquote><p>useState()ã¯è¤‡æ•°å›ä½¿ç”¨ã§ãã€ç•°ãªã‚‹çŠ¶æ…‹å€¤ã‚’ä¿å­˜ã§ãã¾ã™ã€‚</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Example with two different states</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>age<span class="token punctuation">,</span> setAge<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>4. Parameter can be a function, and the initial state is determined by the function's return value. The function is only called once, it used when the initial value is dynamic.:</strong></p> <blockquote><p>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯é–¢æ•°ã§ã‚ã‚‹ã“ã¨ãŒã§ãã€é–¢æ•°ãŒè¿”ã™ã‚‚ã®ãŒåˆæœŸçŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚é–¢æ•°ã¯ä¸€åº¦ã ã‘å‘¼ã³å‡ºã•ã‚Œã€åˆæœŸã®å‹•çš„å€¤ã®å ´åˆã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Example with a function as the initial state</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¾å¤–éƒ¨ props ä¸­å–å¾— count çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œé è¨­ç‚º 0</span>
  <span class="token keyword">const</span> propsCount <span class="token operator">=</span> props<span class="token punctuation">.</span>count <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token comment">// ä½¿ç”¨ useStateï¼Œå°‡åˆå§‹å€¼è¨­ç½®ç‚ºä¸€å€‹å‡½æ•¸ï¼Œé€™å€‹å‡½æ•¸æœƒåœ¨åˆå§‹åŒ–æ™‚è¢«èª¿ç”¨ä¸€æ¬¡</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€™è£¡å¯ä»¥é€²è¡Œä¸€äº›é‚è¼¯è™•ç†ï¼Œä¾‹å¦‚å‹•æ…‹è¨ˆç®—åˆå§‹å€¼</span>
    <span class="token keyword">return</span> propsCount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//é€™æ¨£å¯«æ˜¯æœ‰éŒ¯èª¤çš„ âŒï¼Œå› ç‚ºæ¯æ¬¡æ¸²æŸ“éƒ½æœƒèª¿ç”¨ useStateï¼Œé€™æ¨£æœƒå°è‡´æ¯æ¬¡æ¸²æŸ“éƒ½æœƒèª¿ç”¨å‡½æ•¸ï¼Œé€™æ¨£å°±ä¸æ˜¯åªèª¿ç”¨ä¸€æ¬¡äº†ã€‚ æ­£ç¢ºå¯«æ³•å¦‚ä¸‹ï¼š</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count <span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> props<span class="token punctuation">.</span>count <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//é€™æ¨£ï¼Œé€™å€‹å‡½æ•¸å°±åªæœƒåœ¨æ¸²æŸ“çš„æ™‚å€™åŸ·è¡Œã€‚</span>

</code></pre></div><p><strong>5.çŠ¶æ…‹ã®è¨­å®šãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã¯å€¤ã¾ãŸã¯é–¢æ•°ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ˆã¤ã¾ã‚Šã€å€¤ã‚’æ¸¡ã™ã“ã¨ã‚‚ã€é–¢æ•°ã‚’æ¸¡ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚é–¢æ•°ã®æˆ»ã‚Šå€¤ã«ã‚ˆã£ã¦æ–°ã—ã„çŠ¶æ…‹ãŒè¨­å®šã•ã‚Œã¾ã™ã€‚</strong></p> <p><code>setCount()</code> ã®å¼•æ•°ã¯å€¤ã§ã‚ã‚‹ã‹ã€ã‚ã‚‹ã„ã¯é–¢æ•°ã§ã‚ã‚‹ã‹é¸æŠã§ãã¾ã™ã€‚é–¢æ•°ã®å ´åˆã€ãã®é–¢æ•°ã®å¼•æ•°ã¯ç¾åœ¨ã®çŠ¶æ…‹å€¤ã§ã‚ã‚Šã€é–¢æ•°ã®æˆ»ã‚Šå€¤ãŒæ–°ã—ã„çŠ¶æ…‹å€¤ã¨ãªã‚Šã¾ã™ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// å€¤ã‚’æ¸¡ã™</span>
<span class="token function">setCount</span><span class="token punctuation">(</span>æ–°ã—ã„å€¤<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é–¢æ•°ã‚’æ¸¡ã™</span>
<span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ç¾åœ¨ã®Count</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ã“ã“ã§è¨ˆç®—ã‚„ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¡Œã„ã¾ã™</span>
  <span class="token comment">// æˆ»ã‚Šå€¤ãŒæ–°ã—ã„çŠ¶æ…‹å€¤ã«ãªã‚Šã¾ã™</span>
  <span class="token keyword">return</span> <span class="token function">ä½•ã‚‰ã‹ã®è¨ˆç®—</span><span class="token punctuation">(</span>ç¾åœ¨ã®Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Example with a function as the parameter</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleCountChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// setCount(count + 1);</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevCount</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> prevCount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleCountChange<span class="token punctuation">}</span><span class="token operator">&gt;</span>Change Count<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>6. çŠ¶æ…‹ã®è¨­å®šãƒ¡ã‚½ãƒƒãƒ‰è‡ªä½“ãŒéåŒæœŸã§ã™</strong></p> <p>çŠ¶æ…‹ã®æ›´æ–°ã¯éåŒæœŸã§è¡Œã‚ã‚Œã‚‹ãŸã‚ã€<code>setCount</code> ã‚’å³åº§ã«å‘¼ã³å‡ºã—ã¦ã‚‚ã€React ã¯ã™ãã«çŠ¶æ…‹ã‚’æ›´æ–°ã—ã¾ã›ã‚“ã€‚çŠ¶æ…‹æ›´æ–°å¾Œã«ä½•ã‚‰ã‹ã®æ“ä½œã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€<code>useEffect</code> ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã€é–¢æ•°å¼ã®æ›´æ–°ã§å‰ã®çŠ¶æ…‹å€¤ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// useEffect ã‚’ä½¿ç”¨ã™ã‚‹ä¾‹</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ã“ã“ã§ä½•ã‚‰ã‹ã®æ“ä½œã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã“ã‚Œã¯çŠ¶æ…‹ãŒæ›´æ–°ã•ã‚ŒãŸå¾Œã«å®Ÿè¡Œã•ã‚Œã¾ã™</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Count updated:&quot;</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// count ã‚’ useEffect ã®ä¾å­˜ãƒªã‚¹ãƒˆã«è¿½åŠ ã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãšã«</span>

<span class="token comment">// ã‚ã‚‹ã„ã¯é–¢æ•°å¼ã®æ›´æ–°ã§å‰ã®çŠ¶æ…‹å€¤ã‚’ä½¿ç”¨ã™ã‚‹ä¾‹</span>
<span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">å‰ã®Count</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ã“ã“ã§å‰ã®çŠ¶æ…‹å€¤ï¼ˆå‰ã®Countï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™</span>
  <span class="token keyword">return</span> å‰ã®Count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>7. <code>useState()</code> can be used in a custom hook:</strong></p> <blockquote><p>useState()ã¯ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã§ä½¿ç”¨ã§ãã¾ã™ã€‚</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Custom hook</span>
<span class="token keyword">function</span> <span class="token function">useCounter</span><span class="token punctuation">(</span><span class="token parameter">initialCount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevCount</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> prevCount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevCount</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> prevCount <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> increment<span class="token punctuation">,</span> decrement<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Component using the custom hook</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> increment<span class="token punctuation">,</span> decrement<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useCounter</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span>Increment<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>decrement<span class="token punctuation">}</span><span class="token operator">&gt;</span>Decrement<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="ğŸ”¶-usereducer-ã¨ã¯"><a href="#ğŸ”¶-usereducer-ã¨ã¯" class="header-anchor">#</a> ğŸ”¶ useReducer ã¨ã¯</h2> <blockquote><p><a href="https://qiita.com/seira/items/2fbad56e84bda885c84c" target="_blank" rel="noopener noreferrer">React hooks ã‚’åŸºç¤ã‹ã‚‰ç†è§£ã™ã‚‹ (useReducer ç·¨)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>çŠ¶æ…‹ç®¡ç†ã®ãŸã‚ã®ãƒ•ãƒƒã‚¯ã§ã€<code>useState</code> ã¨ä¼¼ãŸã‚ˆã†ãªæ©Ÿèƒ½ã€‚<code>useState</code> ã¯ <code>useReducer</code> ã«å†…éƒ¨å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚</p> <p><code>(state, action) =&gt; newState</code> ã¨ã„ã†å‹ã® <code>reducer</code> ã‚’å—ã‘å–ã‚Šã€ç¾åœ¨ã® <code>state</code> ã¨ <code>dispatch</code> é–¢æ•°ã®ä¸¡æ–¹ã‚’è¿”ã—ã¾ã™ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token string">&quot;åˆæœŸå€¤&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>reducer</code> ã¯ <code>state</code> ã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã®é–¢æ•°ã§ã€<code>dispatch</code> ã¯ã€<code>reducer</code> ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®å‘¼ã³å‡ºã—é–¢æ•°ã§ã™ã€‚ ï¼ˆå¤‰æ•°ã‚’å®£è¨€ã™ã‚‹ã¨ãã«ã€state ã®æ›´æ–°æ–¹æ³•ã‚’ã‚ã‚‰ã‹ã˜ã‚è¨­å®šã—ã¦ãŠãã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚ï¼‰
<code>dispatch(action)</code>ã§å®Ÿè¡Œ
<code>action</code> ã¯ä½•ã‚’ã™ã‚‹ã®ã‹ã‚’ç¤ºã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€€
<code>{type: increment, payload: 0}</code>ã®ã‚ˆã†ã«ã€type ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆ<code>action</code> ã®è­˜åˆ¥å­ï¼‰ã¨å€¤ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§æ§‹æˆã•ã‚Œã¦ã„ã‚‹ã€‚</p> <h3 id="â–«ï¸-usereducer-ã®æ³¨æ„ç‚¹"><a href="#â–«ï¸-usereducer-ã®æ³¨æ„ç‚¹" class="header-anchor">#</a> â–«ï¸ useReducer ã®æ³¨æ„ç‚¹</h3> <p><strong>1. <code>useReducer</code> ã¯ <code>useState</code> ã®ä»£æ›¿ã§ã¯ãªã„</strong></p> <blockquote><p>useState ã¨ useReducer ã®æ¯”è¼ƒ</p></blockquote> <table><thead><tr><th>ç‰¹æ€§</th> <th><code>useState</code></th> <th><code>useReducer</code></th></tr></thead> <tbody><tr><td>æ‰±ãˆã‚‹ state çš„ type</td> <td>æ•°å€¤ã€æ–‡å­—åˆ—ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€è«–ç†å€¤</td> <td>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€é…åˆ—</td></tr> <tr><td>é–¢é€£ã™ã‚‹ state çš„å–ã‚Šæ‰±ã„</td> <td>â˜“</td> <td>è¤‡æ•°ã‚’åŒæ™‚ã«å–ã‚Šæ‰±ã†ã“ã¨ãŒå‡ºæ¥ã‚‹</td></tr> <tr><td>ãƒ­ãƒ¼ã‚«ãƒ« or ã‚°ãƒ­ãƒ¼ãƒãƒ«</td> <td>ãƒ­ãƒ¼ã‚«ãƒ«</td> <td>ã‚°ãƒ­ãƒ¼ãƒãƒ« <code>useContext()</code> ã¨ä¸€ç·’ã«å–ã‚Šæ‰±ã†</td></tr></tbody></table> <hr> <h2 id="ğŸ”·-usecontext-ã¨ã¯"><a href="#ğŸ”·-usecontext-ã¨ã¯" class="header-anchor">#</a> ğŸ”· useContext ã¨ã¯</h2> <p>React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ„ãƒªãƒ¼ã«å¯¾ã—ã¦ã€Œã‚°ãƒ­ãƒ¼ãƒãƒ«ã€ã¨ã¿ãªã™ãƒ‡ãƒ¼ã‚¿ã«ã¤ã„ã¦åˆ©ç”¨ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†åˆ©ç”¨ã‚’ã‚ˆã‚Šé›£ã—ãã™ã‚‹ç‚ºã€æ…é‡ã«åˆ©ç”¨ã—ãªãã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚</p> <p>Context ã«ã‚ˆã£ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ„ãƒªãƒ¼é–“ã«ãŠã‘ã‚‹ãƒ‡ãƒ¼ã‚¿ã®æ©‹æ¸¡ã—ã«ã¤ã„ã¦ã€ã™ã¹ã¦ã®éšå±¤ã”ã¨ã«æ¸¡ã™å¿…è¦æ€§ãŒãªããªã‚Šã€props ãƒã‚±ãƒ„ãƒªãƒ¬ãƒ¼ã‚’ã—ãªãã¦ã‚‚ä¸‹ã®éšå±¤ã§ Context ã«åå®¹ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p> <p>useContext ã¨ã¯ã€Context æ©Ÿèƒ½ã‚’ã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã«ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸæ©Ÿèƒ½ã€‚
è¦ªã‹ã‚‰ Props ã§æ¸¡ã•ã‚Œã¦ã„ãªã„ã®ã«ã€Context ã«åå®¹ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã¸ã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚</p> <p><img src="https://camo.qiitausercontent.com/d85d663b26e6c050651d65ac61d80a50ab125eb5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3231383635362f31353330363034392d653661652d666439352d653035312d3133623633363365626636352e676966" alt=""></p> <p><img src="https://dev.classmethod.jp/articles/react-i-checked-again-how-to-use-usecontext/" alt="[React] useContextã®ä½¿ã„æ–¹ã‚’æ”¹ã‚ã¦ç¢ºèªã—ã¦ã¿ãŸ"></p> <hr> <ul><li>without useReducer</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> setCount <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Child <span class="token operator">-</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>add<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> setCount <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Parent <span class="token operator">-</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Child count<span class="token operator">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span> setCount<span class="token operator">=</span><span class="token punctuation">{</span>setCount<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Root <span class="token operator">-</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Parent count<span class="token operator">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span> setCount<span class="token operator">=</span><span class="token punctuation">{</span>setCount<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MyApp <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>The above code leads to the problem that the more nested levels are, the more props are passed, and the more difficult the code is to maintain.</p></blockquote> <ul><li>useReducer ä½¿ã‚ãªã„å ´åˆ</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> createContext<span class="token punctuation">,</span> useContext <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">;</span>

<span class="token comment">// 1. Create a context object</span>
<span class="token keyword">const</span> MyContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 3. Retrieve values from the context object using useContext and destructure the object</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> setCount <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>MyContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Child <span class="token operator">-</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>add<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// const { count, setCount } = props;</span>
  <span class="token comment">// 4. Retrieve values from the context object using useContext and destructure the object</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> count <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>MyContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Parent <span class="token operator">-</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* &lt;Child count={count} setCount={setCount} /&gt;
          Child component can access context values directly */</span><span class="token punctuation">}</span>

      <span class="token operator">&lt;</span>Child<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 2. Configure the context provider and pass the value.
           The 'value' prop contains the data to be passed, and all child components,
           including nested ones, can access it using useContext. */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>MyContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> count<span class="token punctuation">,</span> setCount <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Root <span class="token operator">-</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* Parent component can access context values directly */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Parent <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>MyContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MyApp <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>useReducer ã¨ useContext ã‚’ä½¿ã‚ãªã„å ´åˆ</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> createContext<span class="token punctuation">,</span> useContext<span class="token punctuation">,</span> useReducer <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">;</span>

<span class="token comment">// Define the initial state and reducer function</span>
<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;increment&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Create a context object</span>
<span class="token keyword">const</span> MyContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Retrieve values from the context object using useContext and destructure the object</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> state<span class="token punctuation">,</span> dispatch <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>MyContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Child <span class="token operator">-</span> <span class="token punctuation">{</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;increment&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>add<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Retrieve values from the context object using useContext and destructure the object</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> state <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>MyContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Parent <span class="token operator">-</span> <span class="token punctuation">{</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* Child component can access context values directly */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Use useReducer to manage state</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* Configure the context provider and pass the value */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>MyContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> state<span class="token punctuation">,</span> dispatch <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Root <span class="token operator">-</span> <span class="token punctuation">{</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* Parent component can access context values directly */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Parent <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>MyContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MyApp <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ğŸ”·-useeffect-ã¨ã¯"><a href="#ğŸ”·-useeffect-ã¨ã¯" class="header-anchor">#</a> ğŸ”· useEffect ã¨ã¯</h2> <p>'useEffect' ã‚’ä½¿ã†ã¨ã€'useEffect' ã«æ¸¡ã•ã‚ŒãŸé–¢æ•°ã¯ãƒ¬ãƒ³ãƒ€ãƒ¼ã®çµæœãŒç”»é¢ã«åæ˜ ã•ã‚ŒãŸå¾Œã«å‹•ä½œã—ã¾ã™ã€‚
ã¤ã¾ã‚Š 'useEffect' ã¨ã¯ã€ã€Œé–¢æ•°ã®å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ React ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¾Œã¾ã§é…ã‚‰ã›ã‚‹ 'hook'ã€ã§ã™ã€‚</p> <p>å‰¯ä½œç”¨ã®å‡¦ç†ï¼ˆDOM ã®æ›¸ãæ›ãˆã€å¤‰æ•°ä»£å…¥ã€API é€šä¿¡ãªã© UI æ§‹ç¯‰ä»¥å¤–ã®å‡¦ç†ï¼‰ã‚’é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§æ‰±ãˆã¾ã™ã€‚
ã‚¯ãƒ©ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰ã«å½“ãŸã‚Šã¾ã™ã€‚</p> <p>'componentDidMount'
'componentDidUpdate'
'componentWillUnmount'</p> <p><a href="https://ja.legacy.reactjs.org/docs/hooks-effect.html" target="_blank" rel="noopener noreferrer">å‰¯ä½œç”¨ãƒ•ãƒƒã‚¯ã®åˆ©ç”¨æ³•
<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="â–«ï¸-å‰¯ä½œç”¨ã‚’å®Ÿè¡Œã€åˆ¶å¾¡ã™ã‚‹ãŸã‚ã«-useeffect-ã‚’åˆ©ç”¨ã™ã‚‹"><a href="#â–«ï¸-å‰¯ä½œç”¨ã‚’å®Ÿè¡Œã€åˆ¶å¾¡ã™ã‚‹ãŸã‚ã«-useeffect-ã‚’åˆ©ç”¨ã™ã‚‹" class="header-anchor">#</a> â–«ï¸ å‰¯ä½œç”¨ã‚’å®Ÿè¡Œã€åˆ¶å¾¡ã™ã‚‹ãŸã‚ã« useEffect ã‚’åˆ©ç”¨ã™ã‚‹</h3> <p>useEffect()ã®åŸºæœ¬æ§‹æ–‡ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§å®£è¨€ã—ã¾ã™ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">_ ç¬¬ 1 å¼•æ•°ã«ã¯å®Ÿè¡Œã•ã›ãŸã„å‰¯ä½œç”¨é–¢æ•°ã‚’è¨˜è¿°_</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å‰¯ä½œç”¨é–¢æ•°ãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>ä¾å­˜ã™ã‚‹å¤‰æ•°ã®é…åˆ—<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç¬¬ 2 å¼•æ•°ã«ã¯å‰¯ä½œç”¨é–¢æ•°ã®å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’åˆ¶å¾¡ã™ã‚‹ä¾å­˜ãƒ‡ãƒ¼ã‚¿ã‚’è¨˜è¿°</span>
</code></pre></div><p>ç¬¬ 2 å¼•æ•°ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ç¬¬ 1 å¼•æ•°ã«æ¸¡ã•ã‚ŒãŸå‰¯ä½œç”¨é–¢æ•°ã®å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’åˆ¶å¾¡ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚React ã¯ç¬¬ 2 å¼•æ•°ã®ä¾å­˜é…åˆ—ã®ä¸­èº«ã®å€¤ã‚’æ¯”è¼ƒã—ã¦ã€å‰¯ä½œç”¨é–¢æ•°ã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã—ã¾ã™ã€‚</p> <h3 id="â–«ï¸-åŸ·è¡Œæ™‚æ©Ÿ"><a href="#â–«ï¸-åŸ·è¡Œæ™‚æ©Ÿ" class="header-anchor">#</a> â–«ï¸ åŸ·è¡Œæ™‚æ©Ÿ</h3> <p>å¯ä»¥æŠŠ<code>useEffect</code> å‡½æ•¸å¡å¥´èµ° componentDidiMountã€componentDidUpdateã€componentWillUnmount ä¸‰å€‹ç”Ÿå‘½é€±æœŸå‡½æ•¸çš„çµ„åˆé«”ã€‚</p> <ul><li><code>useEffect(() =&gt; {}); componentDidMount + componentDidUpdate;</code></li> <li><code>useEffect(() =&gt; {}, []); componentDidMount;</code></li> <li><code>useEffect(() =&gt; () =&gt; {}); componentWillUnmount;</code></li></ul> <p>ä»¥ä¸‹æ˜¯ <code>useEffect</code> çš„ç†è§£ï¼š</p> <ol><li><p><strong><code>useEffect(() =&gt; {});</code> - <code>componentDidMount</code> + <code>componentDidUpdate</code>:</strong></p> <ul><li>ã“ã®å½¢å¼ã® <code>useEffect</code> ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¾Œã«å®Ÿè¡Œã•ã‚Œã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæ›´æ–°ã•ã‚Œã‚‹ãŸã³ã«ã‚‚å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</li> <li><code>componentDidMount</code> ã¨ <code>componentDidUpdate</code> ã®çµ„ã¿åˆã‚ã›ã«ç›¸å½“ã—ã¾ã™ã€‚</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ã“ã“ã«ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¾ŒãŠã‚ˆã³æ›´æ–°æ™‚ã«å®Ÿè¡Œã•ã‚Œã¾ã™</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong><code>useEffect(() =&gt; {}, []);</code> - <code>componentDidMount</code>:</strong></p> <ul><li>ã“ã®å½¢å¼ã® <code>useEffect</code> ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¾Œã«ã®ã¿å®Ÿè¡Œã•ã‚Œã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ›´æ–°æ™‚ã«ã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã€‚</li> <li><code>componentDidMount</code> ã ã‘ãŒå®Ÿè¡Œã•ã‚ŒãŸå ´åˆã¨åŒã˜ã§ã™ã€‚</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ã“ã“ã«ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¾Œã«ä¸€åº¦ã ã‘å®Ÿè¡Œã•ã‚Œã¾ã™</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong><code>useEffect(() =&gt; () =&gt; {});</code> - <code>componentWillUnmount</code>:</strong></p> <ul><li>ã“ã®å½¢å¼ã® <code>useEffect</code> ã§ã¯ã€è¿”ã‚Šå€¤ã¨ã—ã¦è¿”ã•ã‚ŒãŸé–¢æ•°ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆï¼ˆæ¶ˆãˆã‚‹ï¼‰ã•ã‚Œã‚‹éš›ã«å®Ÿè¡Œã•ã‚Œã€<code>componentWillUnmount</code> ã«ç›¸å½“ã—ã¾ã™ã€‚</li> <li>è¿”ã‚Šå€¤ã¨ã—ã¦è¿”ã•ã‚ŒãŸé–¢æ•°ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹å‰ã«å®Ÿè¡Œã•ã‚Œã€ãƒªã‚½ãƒ¼ã‚¹ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚„è³¼èª­ã®è§£é™¤ã«ä½¿ç”¨ã§ãã¾ã™ã€‚</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ã“ã“ã«ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¾Œã«å®Ÿè¡Œã•ã‚Œã¾ã™</span>

  <span class="token comment">// è¿”ã‚Šå€¤ã¨ã—ã¦è¿”ã•ã‚ŒãŸé–¢æ•°ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹å‰ã«å®Ÿè¡Œã•ã‚Œã¾ã™</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ãƒªã‚½ãƒ¼ã‚¹ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚„è³¼èª­ã®è§£é™¤ãªã©ã®ã‚³ãƒ¼ãƒ‰</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="â–«ï¸-useeffect-ã®ä½¿ã„æ–¹"><a href="#â–«ï¸-useeffect-ã®ä½¿ã„æ–¹" class="header-anchor">#</a> â–«ï¸ useEffect ã®ä½¿ã„æ–¹</h3> <ol><li>ç‚º window å°è±¡æ·»åŠ æ»¾å‹•äº‹ä»¶ - <code>componentDidMount</code> + <code>componentDidUpdate</code></li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">onScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;onScroll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// çµ„ä»¶æ¸²æŸ“å¾Œï¼Œæ·»åŠ æ»¾å‹•äº‹ä»¶</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> onScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// çµ„ä»¶å¸è¼‰æ™‚ï¼Œç§»é™¤æ»¾å‹•äº‹ä»¶</span>
      window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> onScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>å®šæ™‚å™¨ï¼šæ›è¼‰å®šæ™‚å™¨ï¼Œè¦åœ¨çµ„ä»¶æ¸²æŸ“å¾Œæ‰èƒ½æ›è¼‰ï¼Œæ‰€ä»¥è¦åœ¨ useEffect ä¸­æ›è¼‰å®šæ™‚å™¨</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom <span class="token keyword">from</span> <span class="token string">&quot;react-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> timerId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ReactDOM<span class="token punctuation">.</span><span class="token function">unmountComponentAtNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        å¸è¼‰çµ„ä»¶
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="â–«ï¸-useeffect-ä¾è³´é …"><a href="#â–«ï¸-useeffect-ä¾è³´é …" class="header-anchor">#</a> â–«ï¸ useEffect ä¾è³´é …</h3> <blockquote><p>ä¾å­˜é…åˆ—ã®å€¤ãŒå¤‰åŒ–ã—ãŸå ´åˆã®ã¿å‰¯ä½œç”¨é–¢æ•°ã‚’å®Ÿè¡Œã•ã›ã‚‹
useEffectï¼ˆï¼‰ã®ç¬¬ï¼’å¼•æ•°ã«[count]ã‚’æ¸¡ã™ã¨ã€count ã«å¤‰åŒ–ãŒã‚ã£ãŸã¨ãã ã‘å‰¯ä½œç”¨é–¢æ•°ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> makeStyles <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@material-ui/core/styles&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ButtonGroup <span class="token keyword">from</span> <span class="token string">&quot;@material-ui/core/ButtonGroup&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Button <span class="token keyword">from</span> <span class="token string">&quot;@material-ui/core/Button&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Input <span class="token keyword">from</span> <span class="token string">&quot;@material-ui/core/Input&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> useStyles <span class="token operator">=</span> <span class="token function">makeStyles</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">theme</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;&amp; &gt; *&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">margin</span><span class="token operator">:</span> theme<span class="token punctuation">.</span><span class="token function">spacing</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">EffectFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> classes <span class="token operator">=</span> <span class="token function">useStyles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">å›ã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">å›ã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ButtonGroup color<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;outlined primary button group&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> prev <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>ãƒœã‚¿ãƒ³<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>ãƒªã‚»ãƒƒãƒˆ<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ButtonGroup<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ç§ã®åå‰ã¯</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ã§ã™</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>form className<span class="token operator">=</span><span class="token punctuation">{</span>classes<span class="token punctuation">.</span>root<span class="token punctuation">}</span> noValidate autoComplete<span class="token operator">=</span><span class="token string">&quot;off&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Input
          placeholder<span class="token operator">=</span><span class="token string">&quot;å§“&quot;</span>
          value<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">.</span>lastName<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">setName</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>name<span class="token punctuation">,</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Input
          placeholder<span class="token operator">=</span><span class="token string">&quot;å&quot;</span>
          value<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">.</span>firstName<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">setName</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>name<span class="token punctuation">,</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> EffectFunc<span class="token punctuation">;</span>
</code></pre></div><h2 id="ğŸ”·-useref-ã¨ã¯"><a href="#ğŸ”·-useref-ã¨ã¯" class="header-anchor">#</a> ğŸ”· useRef ã¨ã¯</h2> <p><code>useRef</code> æ˜¯ React æä¾›çš„ä¸€ä¸ª Hookï¼Œå…¶ä¸»è¦ç‰¹ç‚¹æ˜¯ç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­ä¿å­˜å’Œè®¿é—®å¯å˜çš„å¼•ç”¨ã€‚ä»¥ä¸‹æ˜¯ <code>useRef</code> çš„ä¸»è¦ç‰¹ç‚¹ï¼š</p> <ol><li><p><strong>ä¿å­˜å¯å˜çš„å¼•ç”¨ï¼š</strong> <code>useRef</code> åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„ <code>current</code> å±æ€§å¯ä»¥è¢«èµ‹å€¼ä¸ºä»»ä½•å¯å˜çš„å€¼ã€‚è¿™ä½¿å¾—åœ¨æ•´ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå†…éƒ½å¯ä»¥è®¿é—®å’Œä¿®æ”¹è¯¥å€¼ï¼Œè€Œä¸å¼•å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p></li> <li><p><strong>ä¸è§¦å‘é‡æ–°æ¸²æŸ“ï¼š</strong> å½“ <code>useRef</code> çš„ <code>current</code> å±æ€§è¢«ä¿®æ”¹æ—¶ï¼Œä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆå­˜å‚¨ä¸éœ€è¦å¼•èµ·è§†å›¾æ›´æ–°çš„æ•°æ®ï¼Œä¾‹å¦‚ DOM å…ƒç´ å¼•ç”¨ã€å®šæ—¶å™¨ IDã€æˆ–å…¶ä»–æŒä¹…æ€§æ•°æ®ã€‚</p></li> <li><p><strong>æŒä¹…æ€§æ•°æ®å­˜å‚¨ï¼š</strong> <code>useRef</code> åˆ›å»ºçš„å¼•ç”¨æ˜¯æŒä¹…çš„ï¼Œå³ä½¿ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå¼•ç”¨ä»ç„¶ä¿æŒä¸å˜ã€‚è¿™ä¸ <code>useState</code> ä¸åŒï¼Œåè€…åœ¨é‡æ–°æ¸²æŸ“æ—¶ä¼šåˆ›å»ºæ–°çš„çŠ¶æ€ã€‚</p></li> <li><p><strong>è®¿é—® DOM å…ƒç´ ï¼š</strong> <code>useRef</code> å¸¸ç”¨äºå¼•ç”¨ DOM å…ƒç´ ã€‚å½“ <code>ref</code> å±æ€§é™„åŠ åˆ° JSX å…ƒç´ ä¸Šæ—¶ï¼Œ<code>useRef</code> çš„ <code>current</code> å±æ€§å°†æŒæœ‰è¯¥å…ƒç´ çš„å¼•ç”¨ã€‚</p></li> <li><p><strong>é€‚ç”¨äºä¿å­˜ä¸Šä¸€ä¸ªå€¼ï¼š</strong> <code>useRef</code> ä¹Ÿå¸¸ç”¨äºä¿å­˜ä¸Šä¸€ä¸ªçŠ¶æ€å€¼ï¼Œå› ä¸ºå®ƒä¸ä¼šå¼•å‘é‡æ–°æ¸²æŸ“ï¼Œå¯ä»¥åœ¨æ¸²æŸ“æœŸé—´ä¿ç•™å…¶å€¼ã€‚</p></li></ol> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº† <code>useRef</code> ä¿å­˜ DOM å…ƒç´ å¼•ç”¨çš„æƒ…å†µï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">ExampleComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> useRef <span class="token operator">&lt;</span> HTMLInputElement <span class="token operator">&gt;</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// åœ¨ç»„ä»¶æŒ‚è½½åï¼Œé€šè¿‡ inputRef.current è®¿é—® input å…ƒç´ </span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>inputRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>inputRef</code> ç”¨äºå¼•ç”¨ <code>input</code> å…ƒç´ ï¼Œè€Œä¸éœ€è¦é€šè¿‡ <code>document.getElementById</code> æˆ–å…¶ä»–æ–¹å¼è·å–ã€‚</p> <blockquote><p>key characteristics of the <code>useRef</code> hook:</p></blockquote> <ol><li><p><strong>Mutable Reference:</strong> <code>useRef</code> creates a mutable object that persists across renders.</p></li> <li><p><strong>Preservation of Value:</strong> The value assigned to <code>current</code> property of the <code>useRef</code> object persists between renders.</p></li> <li><p><strong>Doesn't Trigger Re-renders:</strong> Updating the <code>current</code> property of a <code>useRef</code> does not trigger a re-render of the component.</p></li> <li><p><strong>Preserving Values Without Re-renders:</strong> It's useful for holding values that need to be preserved between renders but don't require triggering a re-render.</p></li> <li><p><strong>Common Use Cases:</strong></p></li></ol> <ul><li>Managing and maintaining references to DOM elements.</li> <li>Holding values that should persist without causing re-renders.</li> <li>Storing mutable values without triggering component updates.</li></ul> <ol start="6"><li><p><strong>When to Use:</strong> <code>useRef</code> is useful for managing and maintaining references to DOM elements, storing mutable values that don't trigger re-renders, and storing mutable values that you want to persist across renders.</p></li> <li><p><strong>When Not to Use:</strong> <code>useRef</code> should not be used to manage state or trigger re-renders.</p></li></ol> <blockquote><p><strong>Note:</strong> <code>useRef</code> is not a replacement for <code>useState</code>. Always use <code>useState</code> when you need to manage state that changes over time. <code>useRef</code> is useful for storing mutable values that don't change over time, such as a reference to a DOM node or a value computed in a previous render.</p></blockquote> <blockquote><p><strong>Note:</strong> <code>useRef</code> returns a mutable ref object whose <code>.current</code> property is initialized to the passed argument (<code>initialValue</code>). The returned object will persist for the full lifetime of the component.</p></blockquote> <blockquote><p><strong>Note:</strong> <code>useRef()</code> is useful for more than the <code>ref</code> attribute. Itâ€™s handy for keeping any mutable value around similar to how youâ€™d use instance fields in classes.</p></blockquote> <h2 id="ğŸ”·-usecallback-ã¨ã¯"><a href="#ğŸ”·-usecallback-ã¨ã¯" class="header-anchor">#</a> ğŸ”· useCallback ã¨ã¯</h2> <h3 id="ğŸ”º-example"><a href="#ğŸ”º-example" class="header-anchor">#</a> ğŸ”º Example</h3> <p>åœ¨å¯¦éš›æ‡‰ç”¨ä¸­ï¼Œ<code>useCallback</code> çš„ä½¿ç”¨å ´æ™¯é€šå¸¸æ¶‰åŠåˆ°å„ªåŒ–æ€§èƒ½ï¼Œç‰¹åˆ¥æ˜¯åœ¨ React æ‡‰ç”¨ä¸­å‚³éå›èª¿å‡½æ•¸çµ¦å­çµ„ä»¶çš„æƒ…æ³ã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹å¯¦éš›æ‡‰ç”¨çš„ä¾‹å­ï¼š</p> <p>å‡è¨­ä½ æœ‰ä¸€å€‹é»é¤æ‡‰ç”¨ï¼ˆé¡ä¼¼ SkipTheDishesï¼‰ï¼Œä½ æœ‰ä¸€å€‹é é¢é¡¯ç¤ºç”¨æˆ¶çš„è¨‚å–®åˆ—è¡¨ã€‚æ¯å€‹è¨‚å–®éƒ½æœ‰ä¸€å€‹ç‹€æ…‹ï¼Œæ¯”å¦‚&quot;å·²ä¸‹å–®&quot;ã€&quot;æº–å‚™ä¸­&quot;ã€&quot;é…é€ä¸­&quot;ç­‰ã€‚ä½ çš„æ‡‰ç”¨å¯èƒ½æœƒæœ‰ä¸€å€‹çµ„ä»¶ä¾†é¡¯ç¤ºå–®å€‹è¨‚å–®çš„è©³ç´°ä¿¡æ¯ï¼Œä¸¦ä¸”ä½ å¸Œæœ›åœ¨é»æ“Š&quot;æ›´æ–°ç‹€æ…‹&quot;æŒ‰éˆ•æ™‚è§¸ç™¼ä¸€å€‹å›èª¿å‡½æ•¸ä¾†æ›´æ–°è¨‚å–®çš„ç‹€æ…‹ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useCallback <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">OrderDetails</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> order<span class="token punctuation">,</span> onUpdateStatus <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token keyword">const</span> handleUpdateStatus <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// åœ¨é€™è£¡è™•ç†æ›´æ–°è¨‚å–®ç‹€æ…‹çš„é‚è¼¯</span>
    <span class="token function">onUpdateStatus</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span>id<span class="token punctuation">,</span> newStatus<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>onUpdateStatus<span class="token punctuation">,</span> order<span class="token punctuation">.</span>id<span class="token punctuation">,</span> newStatus<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* é¡¯ç¤ºè¨‚å–®è©³ç´°ä¿¡æ¯ */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Order ID: </span><span class="token punctuation">{</span>order<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Status: </span><span class="token punctuation">{</span>order<span class="token punctuation">.</span>status<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token punctuation">{</span><span class="token comment">/* æ›´æ–°ç‹€æ…‹æŒ‰éˆ• */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleUpdateStatus<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Update Status</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">OrderList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> orders <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token keyword">const</span> handleUpdateStatus <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">orderId<span class="token punctuation">,</span> newStatus</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// åœ¨é€™è£¡è™•ç†æ›´æ–°è¨‚å–®ç‹€æ…‹çš„é‚è¼¯</span>
    <span class="token comment">// é€™å€‹å‡½æ•¸å¯èƒ½æœƒåœ¨ OrderDetails çµ„ä»¶ä¸­ä½¿ç”¨ï¼Œå› æ­¤ä½¿ç”¨ useCallback é€²è¡Œå„ªåŒ–</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Updating status of order </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>orderId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newStatus<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Order List</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* é¡¯ç¤ºè¨‚å–®åˆ—è¡¨ */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span>orders<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">order</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">OrderDetails</span></span>
          <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>order<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span>
          <span class="token attr-name">order</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>order<span class="token punctuation">}</span></span>
          <span class="token attr-name">onUpdateStatus</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleUpdateStatus<span class="token punctuation">}</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">SkipTheDishesApp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>orders<span class="token punctuation">,</span> setOrders<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token comment">/* åˆå§‹è¨‚å–®æ•¸æ“š */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ...</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">OrderList</span></span> <span class="token attr-name">orders</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>orders<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œ<code>handleUpdateStatus</code> å‡½æ•¸æ˜¯ä¸€å€‹å›èª¿å‡½æ•¸ï¼Œç•¶ä½ é»æ“Š&quot;Update Status&quot;æŒ‰éˆ•æ™‚ï¼Œé€™å€‹å‡½æ•¸æœƒè¢«è§¸ç™¼ã€‚ç”±æ–¼å®ƒè¢«å‚³éçµ¦ <code>OrderDetails</code> çµ„ä»¶ï¼Œæˆ‘å€‘ä½¿ç”¨ <code>useCallback</code> ä¾†ç¢ºä¿å®ƒåªåœ¨ <code>onUpdateStatus</code>ã€<code>order.id</code> æˆ– <code>newStatus</code> æ”¹è®Šæ™‚æ‰é‡æ–°å‰µå»ºã€‚é€™æ¨£å¯ä»¥é¿å…ä¸å¿…è¦çš„çµ„ä»¶é‡æ–°æ¸²æŸ“ï¼Œæé«˜æ‡‰ç”¨æ€§èƒ½ã€‚</p></blockquote> <hr> <h2 id="ğŸ”·-usememo-ã¨ã¯"><a href="#ğŸ”·-usememo-ã¨ã¯" class="header-anchor">#</a> ğŸ”· useMemo ã¨ã¯</h2> <p><a href="https://www.joshwcomeau.com/react/usememo-and-usecallback/" target="_blank" rel="noopener noreferrer">Understanding useMemo and useCallback-Josh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="ğŸ”¶-hooks-compare"><a href="#ğŸ”¶-hooks-compare" class="header-anchor">#</a> ğŸ”¶ Hooks compare</h2> <h3 id="â–«ï¸-usecallback-vs-usememo"><a href="#â–«ï¸-usecallback-vs-usememo" class="header-anchor">#</a> â–«ï¸ useCallback vs useMemo</h3> <blockquote><p><code>useMemo</code> å’Œ <code>useCallback</code>æ¥æ”¶çš„å‚æ•°éƒ½æ˜¯ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨å…¶ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–åæ‰æ‰§è¡Œï¼Œéƒ½æ˜¯è¿”å›ç¼“å­˜çš„å€¼ï¼ŒåŒºåˆ«åœ¨äº <code>useMemo</code> è¿”å›çš„æ˜¯å‡½æ•°è¿è¡Œçš„ç»“æœï¼Œ<code>useCallback</code> è¿”å›çš„æ˜¯å‡½æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°æ˜¯ç»è¿‡å¤„ç†åçš„ä¹Ÿå°±æ˜¯è¯´çˆ¶ç»„ä»¶ä¼ é€’ä¸€ä¸ªå‡½æ•°ç»™å­ç»„ä»¶çš„æ—¶å€™ï¼Œç”±äºæ˜¯æ— çŠ¶æ€ç»„ä»¶æ¯ä¸€æ¬¡éƒ½ä¼šé‡æ–°ç”Ÿæˆæ–°çš„ <code>props</code> å‡½æ•°ï¼Œè¿™æ ·å°±ä½¿å¾—æ¯ä¸€æ¬¡ä¼ é€’ç»™å­ç»„ä»¶çš„å‡½æ•°éƒ½å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™æ—¶å€™å°±ä¼šè§¦å‘å­ç»„ä»¶çš„æ›´æ–°ï¼Œè¿™äº›æ›´æ–°æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ <code>useCallback</code> æ¥å¤„ç†æ­¤å‡½æ•°ï¼Œç„¶åä½œä¸º props ä¼ é€’ç»™å­ç»„ä»¶ã€‚</p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">/* ç”¨react.memo */</span>
<span class="token keyword">const</span> DemoChildren <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* åªæœ‰åˆå§‹åŒ–çš„æ—¶å€™æ‰“å°äº† å­ç»„ä»¶æ›´æ–° */</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å­ç»„ä»¶æ›´æ–°&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    props<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token string">&quot;å­ç»„ä»¶&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å­ç»„ä»¶</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">DemoUseCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>number<span class="token punctuation">,</span> setNumber<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/* æ­¤æ—¶usecallbackçš„ç¬¬ä¸€å‚æ•° (sonName)=&gt;{ console.log(sonName) }
     ç»è¿‡å¤„ç†èµ‹å€¼ç»™ getInfo */</span>
  <span class="token keyword">const</span> getInfo <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">sonName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sonName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>id<span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* ç‚¹å‡»æŒ‰é’®è§¦å‘çˆ¶ç»„ä»¶æ›´æ–° ï¼Œä½†æ˜¯å­ç»„ä»¶æ²¡æœ‰æ›´æ–° */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setNumber</span><span class="token punctuation">(</span>number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å¢åŠ </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DemoChildren</span></span> <span class="token attr-name">getInfo</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>getInfo<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/guide/react/reactBasics.html" class="prev">
        âšªï¸React ã‚’åŸºç¤ã‹ã‚‰ç†è§£ã™ã‚‹
      </a></span> <span class="next"><a href="/guide/react/reactRouter.html">
        âšªï¸ React Router ã‚’åŸºç¤ã‹ã‚‰ç†è§£ã™ã‚‹
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.204ed3d4.js" defer></script><script src="/assets/js/2.a44fb3b0.js" defer></script><script src="/assets/js/1.8d37d391.js" defer></script><script src="/assets/js/37.9bd0a687.js" defer></script>
  </body>
</html>
